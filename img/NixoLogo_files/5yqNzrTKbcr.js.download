if (self.CavalryLogger) { CavalryLogger.start_js(["GiVtF"]); }

__d('MPlaces',['$','DOM','MLegacyDataStore','LoadingIndicator','MRequest','Stratcom','MPageController','MURI','URI','XPlacesUpdateLocationController','ViewerLocationSource','FWLoader'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=c('FWLoader').FW,t={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function u(v){t._JSONLocation=v;},getCurrentJSONLocation:function u(){return t._JSONLocation;},setLocationSearchMode:function u(v){t._currentSearchMode=v;},getLocationSearchMode:function u(){return t._currentSearchMode;},shouldUseFWGeolocation:function u(){return window.FW_ENABLED&&s.isIOS()&&t.enableFWGeolocation;},updateLocation:function u(v){if(v){if(t.shouldUseFWGeolocation())v={coords:v};var w={},x;for(var y=0;y<t.desiredProperties.length;y++){x=t.desiredProperties[y];if(v.coords[x])w[x]=v.coords[x];}if(v.timestamp)w.timestamp=v.timestamp/1000;t._JSONLocation=JSON.stringify(w);t.sendCurrentLocationToServer();if(t.pendingForm){t.submitForm(t.pendingForm);}else if(t.pendingHref)t.gotoPage(t.pendingHref);t.pendingForm=null;t.pendingHref='';m.invoke('location-update',null,{position:v});}},handleError:function u(v){t.clearWatch();m.invoke('location-error',null,{error:v});if(t.pendingForm){t.submitForm(t.pendingForm);t.pendingForm=null;}else if(t.pendingHref){t.gotoPage(t.pendingHref);t.pendingHref='';}},sendCurrentLocationToServer:function u(){var v=Date.now();if(v-t._lastUpdateTime>t.UPDATE_LOCATION_INTERVAL){t._lastUpdateTime=v;var w=q.getURIBuilder().setString('json_location',t._JSONLocation).setEnum('source',r.MSITE_PLACES).getURI();new l(w).setMethod('POST').send();}},gotoPage:function u(v){var w=new p(v);w.addQueryData('json_location',t._JSONLocation);n.load(w);},submitForm:function u(v){v.appendChild(i.create('input',{name:'json_location',type:'hidden',value:t._JSONLocation}));if(!v.onsubmit||v.onsubmit())v.submit();},clearWatch:function u(){if(!t.watchID)return;if(t.shouldUseFWGeolocation()){s.geolocation.clearWatch();}else navigator.geolocation.clearWatch(t.watchID);t.watchID=null;},watchPosition:function u(){if(t.shouldUseFWGeolocation()){t.watchID=1;s.geolocation.watchPosition(t.updateLocation,t.handleError);s.geolocation.getCurrentPosition(t.updateLocation);}else{var v=setTimeout(t.handleError,t.locationOptions.timeout);t.watchID=navigator.geolocation.watchPosition(function(w){clearTimeout(v);t.updateLocation(w);},function(w){clearTimeout(v);t.handleError(w);},t.locationOptions);}},monitorLocation:function u(){t.clearWatch();t.watchPosition();l.listen('postprocess',function(){if(!document.getElementById('place_update')&&t.watchID)t.clearWatch();});},submitFormWithLocation:function u(v){if(typeof v=='string')v=h(v);var w=t;k.show();if(w.watchID&&w._JSONLocation){w.submitForm(v);return;}w.pendingHref='';w.pendingForm=v;w.monitorLocation();return false;},gotoPageWithLocation:function u(v){var w=t;k.show();if(w.watchID&&w._JSONLocation){w.gotoPage(v);return;}w.pendingForm=null;w.pendingHref=v;w.monitorLocation();return false;},onClick:function u(event){event.kill();var v=j.get(event.getNode(t.LINK_SIGIL));t.gotoPageWithLocation(v.href);},onSubmit:function u(event){event.kill();var v=i.find(event.getNode(t.FORM_SIGIL),'form');t.submitFormWithLocation(v);}};f.exports=t;}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});}),null);
__d('MQuickPromotionEmbeddedInterstitial',['DOM','MRequest','Stratcom','XQuickPromotionSimpleLoggingController'],(function a(b,c,d,e,f,g,h,i,j,k){var l=false,m=function n(o,p,q){if(l)return;l=true;function r(event){j.removeCurrentListener();var t=event.getNode(o.promo);h.hide(t);var u=h.find(event.getNode(o.jewel),'div',o.sibling);h.show(u);j.invoke('m:qp:embedded-interstitial:close');}function s(event){if(event.getData().jewel==o.jewel){j.removeCurrentListener();var t=k.getURIBuilder().setInt('qp_id',p).setStringToStringMap('qp_instance_log_data',q).setString('qp_event','view').getURI(),u=new i(t);u.send();}}j.listen('click',o.close,r);j.listen('m:jewel:flyout:open',null,s);};g.main=m;}),null);
__d('MQuickPromotionMMessengerBanner',['DOM','MRequest','Stratcom','XQuickPromotionSimpleLoggingController'],(function a(b,c,d,e,f,g,h,i,j,k){var l=false,m=null,n=function o(p,q,r,s){if(l)return;l=true;function t(){var x=k.getURIBuilder().setInt('qp_id',r).setStringToStringMap('qp_instance_log_data',s).setString('qp_event','view').getURI(),y=new i(x);y.send();}function u(event){j.removeCurrentListener();var x=event.getNode(p.promo);h.hide(x);m.remove();}function v(event){if(event.getData().jewel==p.jewel)t();}function w(event){j.removeCurrentListener();t();m=j.listen('m:jewel:flyout:open',null,v);}j.listen('click',p.close,u);if(q){j.listen('m:qp:embedded-interstitial:close',null,w);}else m=j.listen('m:jewel:flyout:open',null,v);};g.main=n;}),null);
__d('MSearchConst',[],(function a(b,c,d,e,f,g){f.exports={refid:46,news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};}),null);
__d("XMobileSearchTrendingLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/graphsearch\/trending\/logging\/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}});}),null);
__d('MSearchTrendingLogger',['XMobileSearchTrendingLoggingController','MRequest','MSearchConst','Run','Stratcom','forEachObject'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o={registerTrendingTopicListeners:function p(q,r,s,t){var u,v=this;if(!n){n={};k.onLeave(function(){m(n,function(z){return z.remove();});n=null;});}var w=[],x=function z(aa){var ba=q[aa];if(ba==null||n[ba])return 'continue';n[ba]=l.listen('click',ba,function(){this._logTrendingTopicClick(ba,r,s[aa],t);}.bind(v));w.push(n[ba]);};for(var y=0;y<q.length;y++){var u=x(y);if(u==='continue')continue;}return w;},logTrendingTopicImpressions:function p(q,r,s,t){if(!q||q.length===0)return;for(var u=0;u<q.length;u++)if(q[u]==null){q.splice(u,1);s.splice(u,1);u--;}var v=h.getURIBuilder().setIntVector('topic_ids',q).setString('source',r).setIntVector('positions',s).setInt('query_id',t).setString('event',j.event_impression).getURI(),w=new i(v);w.send();},_logTrendingTopicClick:function p(q,r,s,t){if(!q)return;return function(){var u=h.getURIBuilder().setIntVector('topic_ids',[q]).setString('source',r).setIntVector('positions',[s]).setInt('query_id',t).setString('event',j.event_click).getURI(),v=new i(u);v.send();};}};f.exports=o;}),null);
__d('MSearchTypeaheadPerfLogger',['BanzaiScuba','CurrentUser','SubscriptionsHandler','performanceNow'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m,n,o){'use strict';this._searchType=n.type;this._sampleRate=n.sample_rate;this._siteType=n.site;this._cacheEnable=o?1:0;this.init(m);this.initEvents();this._reset();}l.prototype.init=function(m){'use strict';this._data=m.getDatasource();this._typeahead=m;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};l.prototype.initEvents=function(){'use strict';this._subscriptions=new j();this._subscriptions.addSubscriptions(this._data.listen('initial_render',this.initialRender.bind(this)),this._data.listen('after_complete',this.complete.bind(this)),this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this)),this._data.listen('req_sent',this.remoteRequestSent.bind(this)),this._data.listen('req_recv',this.remoteRequestReceived.bind(this)),this._typeahead.listen('update',this.queryStart.bind(this)),this._typeahead.listen('render_start',this.renderStart.bind(this)),this._typeahead.listen('rendered',this.rendered.bind(this)));};l.prototype.destroy=function(){'use strict';this._subscriptions.release();};l.prototype._reset=function(){'use strict';this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};l.prototype.initialRender=function(){'use strict';this._intialRenderTime=Date.now();};l.prototype.complete=function(){'use strict';this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};l.prototype.queryStart=function(m){'use strict';this._reset();this._originQuery=m;this._startTime=Date.now();};l.prototype.renderStart=function(){'use strict';this._renderStart=k();};l.prototype.rendered=function(){'use strict';this._rendered=k()-this._renderStart;};l.prototype.remoteRequestDispatch=function(m){'use strict';this._remoteRequestDispatchTime=Date.now();this._sid=m;};l.prototype.remoteRequestSent=function(){'use strict';this._remoteRequestSentTime=Date.now();};l.prototype.remoteRequestReceived=function(m){'use strict';this._remoteRequestReceivedTime=Date.now();this._resultLength=m;this._cacheOnly=0;};l.prototype.logToScuba=function(){'use strict';if(this._startTime===null)return;if(this._originQuery!==this._query)return;var m=new h('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});m.addInteger('sample_rate',this._sampleRate);m.addNormal('typeahead_type',this._searchType);m.addNormal('site',this._siteType);if(this._vertical){m.addNormal('vertical',this._vertical);m.addNormal('search_mode',this._typeahead.state.searchMode);}m.addNormal('session_id',this._sid);m.addNormal('user_id',i.getID());m.addNormal('query',this._query);m.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)m.addInteger('rendered',this._rendered);if(this._cacheOnly===0){m.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));m.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));m.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));m.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));m.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));m.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}m.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));m.addInteger('num_result',this._resultLength);m.addNormal('is_cache_only',this._cacheOnly);m.addNormal('is_cache_enable',this._cacheEnable);m.post();};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerV2',['Banzai','Stratcom','SubscriptionsHandler','URI'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m,n,o,p){'use strict';this.$MSearchTypeaheadPerfLoggerV211=3;this.$MSearchTypeaheadPerfLoggerV212=3;this.$MSearchTypeaheadPerfLoggerV22=n;this.$MSearchTypeaheadPerfLoggerV21=m;this.$MSearchTypeaheadPerfLoggerV24='mtouch_typeahead_log_perf';this.$MSearchTypeaheadPerfLoggerV25='mtouch_serp_log_perf';this.$MSearchTypeaheadPerfLoggerV28=p;this.$MSearchTypeaheadPerfLoggerV29='';this.$MSearchTypeaheadPerfLoggerV23={query:null,latencyData:[],typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:null,sessionStartTime:null,click:false,isBootstrapClick:false,isExactMatchKeywordClick:false,isNullStateClick:false,isSeeMoreClick:false};this.$MSearchTypeaheadPerfLoggerV214();this.$MSearchTypeaheadPerfLoggerV215();}l.prototype.$MSearchTypeaheadPerfLoggerV214=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213=new j();this.$MSearchTypeaheadPerfLoggerV213.addSubscriptions(i.listen('m-typeahead-logger:new-session-id',null,function(m){this.$MSearchTypeaheadPerfLoggerV216(m.getData().sessionID,m.getData().query);}.bind(this)),i.listen('log-m-search-session-end',null,function(m){this.$MSearchTypeaheadPerfLoggerV217();this.$MSearchTypeaheadPerfLoggerV215();}.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('update',this.onQueryUpdated.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('show',this.onResultsRendered.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('select',this.onResultLinkReady.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('on-enter-pressed',this.onEnterPressed.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('result-selected',this.onResultSelected.bind(this)),i.listen('m:page:render:complete',null,function(m){var n=new k(this.$MSearchTypeaheadPerfLoggerV29),o=new k(m.getData().path),p=Date.now()-this.$MSearchTypeaheadPerfLoggerV210;if(n.getPath()===o.getPath()&&p>=0){var q={tti:p,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,uriPath:n.getPath()};h.post(this.$MSearchTypeaheadPerfLoggerV25,q,{delay:this.$MSearchTypeaheadPerfLoggerV211,retry:true});}this.$MSearchTypeaheadPerfLoggerV29='';}.bind(this)));};l.prototype.destroy=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213.release();};l.prototype.onEnterPressed=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultLinkReady=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m.href;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultsRendered=function(m,n){'use strict';var o=this.$MSearchTypeaheadPerfLoggerV218(),p=this.$MSearchTypeaheadPerfLoggerV219(o);if(p==null)return;if(!this.$MSearchTypeaheadPerfLoggerV220())return;var q=Array.isArray(m)?this.$MSearchTypeaheadPerfLoggerV221(m):this.$MSearchTypeaheadPerfLoggerV221(m.show);if(this.$MSearchTypeaheadPerfLoggerV222(q))return;var r=m.show?q.map(function(v){return {isNullStateSuggestion:o==='',isFromCache:v.isFromCache,isSeeMore:v.isSeeMore};}):q,s=r.every(function(v){return v.isNullStateSuggestion||v.isSeeMore||v.exactMatchKeyword;})&&r.some(function(v){return v.isNullStateSuggestion;}),t=r.every(function(v){return v.exactMatchKeyword||v.isSeeMore;}),u=r.every(function(v){return v.isFromCache||v.isSeeMore||v.exactMatchKeyword;})&&r.some(function(v){return v.isFromCache;})&&!t;this.$MSearchTypeaheadPerfLoggerV23.latencyData.push({query:o,allFromNullState:s,allFromCache:u,allFromEcho:t||q.length===0,latency:Date.now()-p});this.$MSearchTypeaheadPerfLoggerV27=q;};l.prototype.onQueryUpdated=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV220()){this.$MSearchTypeaheadPerfLoggerV23.query=m;this.$MSearchTypeaheadPerfLoggerV26[m]=Date.now();}};l.prototype.onResultSelected=function(m){'use strict';if(m.id){if(m.bootstrapped){this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=true;}else if(m.exactMatchKeyword){this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=true;}else if(m.isSeeMore){this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;}else if(m.isNullStateSuggestion)this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=true;}else if(m.rel>0){var n=this.$MSearchTypeaheadPerfLoggerV28.get(m);if(n)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=n.bootstrap==1;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=this.$MSearchTypeaheadPerfLoggerV218()==='';}else this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;this.$MSearchTypeaheadPerfLoggerV23.click=true;};l.prototype.$MSearchTypeaheadPerfLoggerV215=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV26={};this.$MSearchTypeaheadPerfLoggerV27=[];this.$MSearchTypeaheadPerfLoggerV23.query=null;this.$MSearchTypeaheadPerfLoggerV23.latencyData=[];this.$MSearchTypeaheadPerfLoggerV23.sessionID=null;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=null;this.$MSearchTypeaheadPerfLoggerV23.click=false;this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=false;this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=false;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=false;this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=false;};l.prototype.$MSearchTypeaheadPerfLoggerV218=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV21.getValue()||'';};l.prototype.$MSearchTypeaheadPerfLoggerV220=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV23.sessionID!=null;};l.prototype.$MSearchTypeaheadPerfLoggerV216=function(m,n){'use strict';this.$MSearchTypeaheadPerfLoggerV215();this.$MSearchTypeaheadPerfLoggerV23.sessionID=m;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=Date.now();this.$MSearchTypeaheadPerfLoggerV23.query=n;this.$MSearchTypeaheadPerfLoggerV23.typeaheadType=this.$MSearchTypeaheadPerfLoggerV22;};l.prototype.$MSearchTypeaheadPerfLoggerV219=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV26[m]!=null){return this.$MSearchTypeaheadPerfLoggerV26[m];}else return this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime;};l.prototype.$MSearchTypeaheadPerfLoggerV222=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV27.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;}),o=m.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;});return n.length==o.length&&n.every(function(p,q){return p==o[q];});};l.prototype.$MSearchTypeaheadPerfLoggerV221=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV21;return m.filter(function(o){return !o.isInvalidated&&o!==n.loadingIndicator;});};l.prototype.$MSearchTypeaheadPerfLoggerV217=function(){'use strict';var m={query:this.$MSearchTypeaheadPerfLoggerV23.query,latencyData:this.$MSearchTypeaheadPerfLoggerV23.latencyData,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:this.$MSearchTypeaheadPerfLoggerV23.sessionID,sessionStartTime:this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime,click:this.$MSearchTypeaheadPerfLoggerV23.click,isBootstrapClick:this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick,isExactMatchKeywordClick:this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick,isNullStateClick:this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick,isSeeMoreClick:this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick};h.post(this.$MSearchTypeaheadPerfLoggerV24,m,{delay:this.$MSearchTypeaheadPerfLoggerV212,retry:true});i.invoke('typeahead-perf-logger-did-log',null,m);};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerUtil',['MLegacyDataStore','MSearchTypeaheadPerfLogger','MSearchTypeaheadPerfLoggerV2','SearchMTouchGlobalOptions'],(function a(b,c,d,e,f,g,h,i,j,k){var l={getNewMSearchTypeaheadPerfLogger:function m(n,o,p){if(k.useNewTypeaheadPerfLogger){return new j(n,o.type,p,h);}else return new i(n,o,p);}};f.exports=l;}),null);
__d('MRecentSearchesUpdater',['Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j='search-recent-queries';function k(l){'use strict';this.$MRecentSearchesUpdater1=new i();this.$MRecentSearchesUpdater1.addSubscriptions(l.listen('change',this.changeQuery.bind(this)),l.listen('select',this.addRecentSearchWithSelection.bind(this)),l.listen('show',this.changeResults.bind(this)),l.listen('query',this.addRecentSearchWithQuery.bind(this)),l.listen('refreshRecent',this.refreshRecent.bind(this)));}k.prototype.destroy=function(){'use strict';this.$MRecentSearchesUpdater1.release();};k.prototype.refreshRecent=function(){'use strict';h.invoke('refreshRecent',j,{});};k.prototype.changeQuery=function(l){'use strict';this.currentQuery=l;};k.prototype.changeResults=function(l){'use strict';if(l.show){this.results=l.show.slice();}else this.results=l.slice();};k.prototype.addRecentSearchWithQuery=function(){'use strict';h.invoke('addRecentQuery',j,{query:this.currentQuery});};k.prototype.addRecentSearchWithSelection=function(l){'use strict';var m=l&&(l.rel||l.getAttribute('rel'));if(!m){this.addRecentSearchWithQuery();return;}for(var n=0;n<this.results.length;n++)if(this.results[n].id===m)h.invoke('addRecentSearch',j,{result:this.results[n]});};f.exports=k;}),null);
__d('MSearchTypeaheadLogger',['setTimeoutAcrossTransitions','MLegacyDataStore','DOM','MTouchClick','MRequest','SubscriptionsHandler','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){var o=1000;function p(r){var s=[];for(var t=0,u=r.length;t<u;t++){var v=r[t];if(v.getAttribute('rel')>0){var w={id:v.getAttribute('rel')};w.type=v.type;w.renderType=v.renderType;try{var x=j.find(v,'a','typeahead-result');if(i.get(x).bootstrap)w.bootstrap=1;}catch(y){}s.push(w);}}return s;}function q(r,s){'use strict';this.typeahead=r;this.uri=s;this.initialize();this.emptyQueryResults=[];this.addSubscriptions();}q.prototype.destroy=function(){'use strict';clearTimeout(this.blurTimeout);this.subscriptions.release();};q.prototype.addSubscriptions=function(){'use strict';var r=k.hasTouchEvents()?'touchend':'click';if(this.subscriptions)this.subscriptions.release();this.subscriptions=new m();this.subscriptions.addSubscriptions(this.typeahead.listen('focus',function(){this.startSession(this.typeahead.getValue(),{force:true});}.bind(this)),this.typeahead.listen('change',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(s);if(this.sessionInProgress())this.data.query=s;}.bind(this)),this.typeahead.listen('keypress',function(s){this.keypressed+=1;}.bind(this)),this.typeahead.listen('select',function(s){var t=s&&(s.rel||s.getAttribute('rel'));if(!this.data.query)this.data.null_state=1;this.data.click_event=Date.now();if(t){this.data.selected_id=t;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)n.invoke('m:search-typeahead:select',null,{node:s,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this)),this.typeahead.listen('show',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(s.show){this.results=p(s.show);if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=s.slice().filter(function(u){return !u.isInvalidated;});if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this)),this.typeahead.listen('query',function(s,t){this.data.selected_search=1;this.data.selected_type=t;this.logToServer();}.bind(this)),n.listen(r,'search-activator',function(){this.startSession('',{force:true});}.bind(this)),n.listen(r,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this)),this.typeahead.listen('scroll',function(event){this.data.scrolled=1;}.bind(this)));};q.prototype.updateTypeahead=function(r){'use strict';this.typeahead=r;this.addSubscriptions();};q.prototype.blur=function(r){'use strict';this.blurInProgress=true;this.blurTimeout=h(function(){this.data.session_end_reason=r;if(!this.data.query)this.data.null_state=1;this.logToServer();}.bind(this),o);};q.prototype.startSession=function(r,s){'use strict';s=s||{};if(this.sessionID==null&&(r||s.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=r;this.data.session_start=Date.now();n.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID,query:r});}};q.prototype.sessionInProgress=function(){'use strict';if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};q.prototype.logToServer=function(){'use strict';clearTimeout(this.blurTimeout);if(this.sessionID!=null){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)this.data.candidate_results=this.results;this.data.null_state_candidate_results=this.emptyQueryResults;var r=new l(this.uri);r.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};q.prototype.initialize=function(){'use strict';this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false;};f.exports=q;}),null);
__d("XLiveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/sports\/{?query}\/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},year:{type:"Int"},fref:{type:"String"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}});}),null);
__d('MTypeaheadNullstateSource',['URI','Stratcom','MTypeaheadTouchSource','XLiveController'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n='graph-search-entry-point',o='search-recent-queries';l=babelHelpers.inherits(p,j);m=l&&l.prototype;function p(q,r){'use strict';m.constructor.call(this,q,r);i.listen('setCurrentProfileID',n,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));i.listen('addRecentSearch',o,function(event){var s=event.getData().result;if(s)this.addRecentResult(s);}.bind(this));i.listen('addRecentQuery',o,function(event){var s=event.getData().query;if(s){var t=this.makeRecentResultWithQuery(s);this.addRecentResult(t);}}.bind(this));i.listen('refreshRecent',o,function(){this.refresh();}.bind(this));i.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}p.prototype.makeRecentResultWithQuery=function(q){'use strict';return {display:q,name:q,id:q,uri:'/search/top/?q='+q};};p.prototype.addRecentResult=function(q){'use strict';if(q.isTrending)return;q.isRecentSearch=true;var r={},s=0;q.idx=s;r[q.id]=q;for(var t in this._raw)if(t!=q.id){s++;this._raw[t].idx=s;r[t]=this._raw[t];}this._raw=r;};p.prototype.refresh=function(){'use strict';this._raw={};this.sendRequest();};p.prototype.getAuxiliaryData=function(){'use strict';return {profile_id:this.profileID?this.profileID:this.groupID?this.groupID:null,disable_single_state:this.singleStateDisabled===true,enable_scoped:this.scopedEnabled===true};};p.prototype.ondata=function(q){'use strict';m.ondata.call(this,q.nullstate);};p.prototype.matchResults=function(q){'use strict';var r=[];if(q==='')r=Object.keys(this._raw);this.sortHits(q,r);var s=this.renderNodes(q,r);this.invoke('resultsready',s);this.invoke('complete');};p.prototype.setCurrentProfileID=function(q){'use strict';this.profileID=q;};p.prototype.setForceDisableSingleState=function(q){'use strict';this.singleStateDisabled=q;};p.prototype.setEnableScoped=function(q){'use strict';this.scopedEnabled=q;};p.prototype.sortHits=function(q,r){'use strict';r.sort(this.sortingFunction.bind(this));};p.prototype.sortingFunction=function(q,r){'use strict';var s=this._raw[q],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx,u=this._raw[r],v=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return t-v;};p.prototype.getTransformer=function(){'use strict';return function(q){if(q.keyword_type==='trending'){var r=new h('/topic/trending/'+q.id);if(q.isSport)r=k.getURIBuilder().setString('query',String(q.id)).setString('ref','m_search_null_state').getURI();return {id:q.name,display:q.name,name:q.name,uri:r.toString(),topicID:q.id,trendingQueryID:q.trendingQueryID,subtext:q.articleTitle,type:'trending',photo:q.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(q.type==='keyword'||q.type==='grammar'){r=new h(q.path||q.uri);return {cost:q.cost,idx:q.idx,display:q.text,name:q.text,type:'keyword',id:q.uid,uri:r.toString(),actionTime:q.action_time,isPYMK:q.pymk,isRecentSearch:q.recent_search,subtext:q.subtext,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};}return {actionTime:q.action_time,name:q.text,uri:q.path||q.uri,id:q.uid||q.id,display:q.name||q.text,photo:q.photo,category:q.category,cost:q.cost,idx:q.idx,tokens:q.tokens,type:q.type[0].toUpperCase()+q.type.slice(1),verticalType:q.vertical_type,is_verified:q.is_verified,subtext:q.subtext,isPYMK:q.pymk,isRecentSearch:q.recent_search,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};};};f.exports=p;}),null);
__d('DOMContainer.react',['React','ReactDOM','invariant','isNode'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.getDOMChild=function(){var u=this.props.children;k(u)||j(0);return u;}.bind(this),q;}o.prototype.shouldComponentUpdate=function(p,q){'use strict';return p.children!==this.props.children;};o.prototype.componentDidMount=function(){'use strict';i.findDOMNode(this).appendChild(this.getDOMChild());};o.prototype.componentDidUpdate=function(){'use strict';var p=i.findDOMNode(this);while(p.lastChild)p.removeChild(p.lastChild);p.appendChild(this.getDOMChild());};o.prototype.render=function(){'use strict';if(this.props.display==='block')return h.createElement('div',this.props,undefined);return h.createElement('span',this.props,undefined);};o.propTypes={display:n.oneOf(['inline','block'])};o.defaultProps={display:'inline'};f.exports=o;}),null);