if (self.CavalryLogger) { CavalryLogger.start_js(["dGJ8N"]); }

__d('CtaImpressionsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(){this.clear();}k.prototype.log=function(){i.log('logger:CtaImpressionsLoggerConfig',this.$CtaImpressionsTypedLogger1,h.BASIC);};k.prototype.logVital=function(){i.log('logger:CtaImpressionsLoggerConfig',this.$CtaImpressionsTypedLogger1,h.VITAL);};k.prototype.clear=function(){this.$CtaImpressionsTypedLogger1={};return this;};k.prototype.updateData=function(m){this.$CtaImpressionsTypedLogger1=babelHelpers['extends']({},this.$CtaImpressionsTypedLogger1,m);return this;};k.prototype.setCtaType=function(m){this.$CtaImpressionsTypedLogger1.cta_type=m;return this;};k.prototype.setOriginalURI=function(m){this.$CtaImpressionsTypedLogger1.original_uri=m;return this;};k.prototype.updateExtraData=function(m){m=j(i.serializeMap(m));i.checkExtraDataFieldNames(m,l);this.$CtaImpressionsTypedLogger1=babelHelpers['extends']({},this.$CtaImpressionsTypedLogger1,m);return this;};k.prototype.addToExtraData=function(m,n){var o={};o[m]=n;return this.updateExtraData(o);};var l={cta_type:true,original_uri:true};f.exports=k;}),null);
__d('MPopupSmallCta',['CtaImpressionsTypedLogger','MAnimator','Style','MViewport','ge'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m=300,n=150,o=1000,p=214,q=3000,r={show:function s(t,u,v,w){this._expandingCta=t;this._ctaUnit=u;this._closeIcon=v;this._isSmartScroll=w;this._ctaVisible=false;this._ctaShownOnce=false;this._ctaClosed=false;window.addEventListener('load',this._init.bind(this));},_init:function s(){var t=l('header'),u=l('header-notices'),v=l('mobile_login_bar');this._scrollThreshold=0;this._height=p;if(t){j.set(t,'z-index','0');var w=t.clientHeight;if(w)this._scrollThreshold+=w;}if(u){j.set(u,'z-index','0');var x=u.clientHeight;if(x)this._scrollThreshold+=x;}if(v){var y=v.clientHeight;if(y){this._scrollThreshold+=y;this._height=this._isSmartScroll?y:p;}}setInterval(this._updateCTA.bind(this),o);if(!this._isSmartScroll)this._timerId=setTimeout(this._showCTA.bind(this),q);this._closeIcon.addEventListener('click',function(z){this._ctaClosed=true;this._hideCTA();}.bind(this));},_hideCTA:function s(){var t=this._expandingCta.clientHeight;i.play(t,0,n,function(u){return j.set(this._expandingCta,'height',Math.round(u)+'px');}.bind(this));this._ctaVisible=false;clearTimeout(this._timerId);},_showCTA:function s(){if(this._ctaVisible)return;j.set(this._ctaUnit,'margin-top','0px');j.set(this._expandingCta,'background','none');i.play(0,this._height,n,function(u){return j.set(this._expandingCta,'height',Math.round(u)+'px');}.bind(this));this._ctaVisible=true;this._ctaShownOnce=true;clearTimeout(this._timerId);if(!this._isSmartScroll){var t=new h();t.setCtaType('m_popup_cta');t.setOriginalURI(window.location.href);t.logVital();}},_updateCTA:function s(){var t=k.getHeight();if(t<this._height)if(this._ctaVisible){this._hideCTA();}else return;if(this._isSmartScroll){var u=this._scrollThreshold;if(!this._ctaVisible&&!this._ctaClosed&&k.getScrollTop()>u)this._showCTA();if(this._ctaVisible&&k.getScrollTop()<u)this._hideCTA();}else{var v=m;if(!this._ctaShownOnce&&k.getScrollTop()>v)this._showCTA();}}};f.exports=r;}),null);
__d('MReactionUnitViewportTracking',['MLegacyDataStore','DOM','MarauderLogger','MViewportTracking','Stratcom','ge'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o,p='reaction-unit-logging';n=babelHelpers.inherits(q,k);o=n&&n.prototype;q.prototype.getDataFromConfig=function(r){this.$MReactionUnitViewportTracking1=[l.listen('m:jewel:flyout:open',null,function(s){if(s.getData().jewel==='notifications')this.startRecordingTimeTrackingData();}.bind(this)),l.listen('m:jewel:flyout:close',null,function(s){if(s.getData().jewel==='notifications')this.stopRecordingTimeTrackingData();}.bind(this)),l.listen('unload',null,function(){this.stopRecordingTimeTrackingData();}.bind(this))];this.isTimeTrackingEnabled=true;};q.prototype.getAllStories=function(){var r=m('notifications_flyout');if(!r)return [];return i.scry(r,'div',p);};q.prototype.getTimeout=function(){return 1;};q.prototype.getDataToLog=function(r){return h.get(r).logging_data;};q.prototype.getMinSizeToBeVisible=function(r){return 0;};q.prototype.getStoryID=function(r){return r.id;};q.prototype.getTimetrackingDataToLog=function(r){var s={};Object.assign(s,h.get(r.story).logging_data);s.unit_type=s.interacted_story_type;delete s.interacted_story_type;s.first_appear_time=r.evp_ts/1000;s.vpvd_time_delta=Math.round(r.vpvd);var t=this.getAllStories();s.unit_count=t.length;s.unit_position=t.indexOf(r.story);return s;};q.prototype.sendDataToLog=function(r){if(!r.vpvd_time_delta)return;j.log('reaction_unit_impression','reaction_units',r);};q.prototype.onUnload=function(){this.startRecordingTimeTrackingData();};function q(){n.apply(this,arguments);}f.exports.init=function(r){new q().init(r);};}),null);
__d('MReactionLogging',['MLegacyDataStore','MarauderLogger','MReactionUnitViewportTracking','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k){var l='reaction_logging',m=[];function n(p){j.init(p);if(m.length)return;m=[k.listen('click',l,function(q){o(q.getNode(l));}),k.listen('reaction-unit-expiration',null,function(q){i.log('reaction_unit_did_timeout','reaction_units',q.getData());})];}function o(p){var q=h.get(p).logging_data;i.log('reaction_unit_interaction','guide_cards_null_state',q);}f.exports={init:n};}),null);
__d("XTodayReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/today\/reaction\/",{cursor:{type:"String"},id:{type:"String"},lat:{type:"Float"},"long":{type:"Float"}});}),null);
__d('MReactionUnitExpirations',['MLocationPrompt','MRequest','setTimeoutAcrossTransitions','Stratcom','XTodayReactionController'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m={},n=[],o=1000*60*10;function p(){if(n.length)return;n=[k.listen(h.STRATCOM_UPDATE,null,function(x){s(x.getData().position.coords);})];j(r,o);}function q(x,y,z){m[x]={unit_type:z,expiration:y};if(y.radius&&h.getCoords())t(x,h.getCoords());}function r(){var x=Date.now()/1000;for(var y in m)if(x>m[y].expiration.timestamp)u(y);j(r,o);}function s(x){if(!x||x.latitude===undefined||x.longitude===undefined)return;for(var y in m)t(y,x);}function t(x,y){var z=m[x].expiration;if(z.radius&&v(z.latitude,z.longitude,y.latitude,y.longitude)>z.radius)u(x,y);}function u(x){var y=l.getURIBuilder().setString('id',x),z=h.getCoords();if(z)y.setFloat('lat',z.latitude).setFloat('long',z.longitude);k.invoke('reaction-unit-expiration',null,{unit_type:m[x].unit_type});new i(y.getURI().toString()).send();delete m[x];}function v(x,y,z,aa){var ba=6371000,ca=w(z-x),da=w(aa-y),ea=Math.sin(ca/2)*Math.sin(ca/2)+Math.cos(w(x))*Math.cos(w(z))*Math.sin(da/2)*Math.sin(da/2),fa=2*Math.atan2(Math.sqrt(ea),Math.sqrt(1-ea)),ga=ba*fa;return ga;}function w(x){return x*(Math.PI/180);}f.exports={init:p,updateUnitExpiration:q};}),null);
__d('MUFISocialSentence',['Bootloader','CSS','DOM','MLiveData','Stratcom','SubscriptionsHandler','cx','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q,r,s,t,u,v){'use strict';if(!v&&!s)return;this.$MUFISocialSentence1=q;this.$MUFISocialSentence2=k.get(r);this.$MUFISocialSentence3=t;this.$MUFISocialSentence4=u;this.$MUFISocialSentence5=v;this.$MUFISocialSentence6=s;this.$MUFISocialSentence7=new m();this.$MUFISocialSentence7.addSubscriptions(this.$MUFISocialSentence2.listen('change',this.onChange.bind(this)),l.listen('m:page:unload',null,this.onUnload.bind(this)));}p.prototype.onChange=function(){'use strict';var q=this.$MUFISocialSentence2.getData();if(q.request_id===this.$MUFISocialSentence4)return;i.removeClass(this.$MUFISocialSentence1,'like_opt');var r=this.$MUFISocialSentence5&&q.like_count?q[this.$MUFISocialSentence3][0]:null,s=this.$MUFISocialSentence6&&q.comment_count?q.comment_count:null;if(r&&r.text){this.$MUFISocialSentence8={text:r,ftid:q.ft_ent_identifier};r=r.text;if(!this.$MUFISocialSentence6)h.loadModules(["MReactComponentRenderer","MUFISocialSentenceTextWithEntities.react"],function(u,v){u(v,this.$MUFISocialSentence1,this.$MUFISocialSentence8);}.bind(this),'MUFISocialSentence');return;}if(r){var t=this.$MUFISocialSentence3!=='like_counts'&&!q.like_fallback&&s?'div':'span';r=j.create(t,null,r);i.addClass(r,"_28wy");}if(s){s=s>1?o._({"*":"{count} comments"},[o.param('count',s,[0])]):o._({"*":"{count} comment"},[o.param('count',s,[0])]);s=j.create('span',{},s);i.addClass(s,"_28wy");}j.setContent(this.$MUFISocialSentence1,[r,s]);this.$MUFISocialSentence9(q);};p.prototype.$MUFISocialSentence9=function(q){'use strict';var r=this.$MUFISocialSentence5&&(q.like_count||q.reactioncount),s=this.$MUFISocialSentence6&&q.comment_count;i.conditionShow(this.$MUFISocialSentence1,!!(r||s));};p.prototype.onUnload=function(){'use strict';this.$MUFISocialSentence7.release();this.$MUFISocialSentence7=null;};f.exports=p;}),null);