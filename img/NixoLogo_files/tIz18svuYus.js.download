if (self.CavalryLogger) { CavalryLogger.start_js(["BWp4v"]); }

__d("MCompositionPrivacyFields",[],(function a(b,c,d,e,f,g){f.exports={PRIVACY_FBID:"PRIVACY_FBID",CLOSE_DIALOG:"CLOSE_DIALOG",ALREADY_SAVED_STICKY:"ALREADY_SAVED_STICKY",NEVER_SAVE_STICKY:"NEVER_SAVE_STICKY",CUSTOM_LABEL:"CUSTOM_LABEL",CUSTOM_OPTION:"CUSTOM_OPTION"};}),null);
__d("OGComposerConstants",[],(function a(b,c,d,e,f,g){f.exports={EditAttachmentURI:"\/ajax\/composerx\/attachment\/edit\/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2};}),null);
__d("PrivacyConst",[],(function a(b,c,d,e,f,g){f.exports={BaseValue:{FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},CustomPrivacyTokens:{FRIENDS:247124075410460,FRIENDS_OF_FRIENDS:498125493540100},FriendsValue:{EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},PostParam:{EVERYONE:300645083384735,NETWORKS_FRIENDS:123780391104836,FRIENDS_OF_FRIENDS:275425949243301,FRIENDS:291667064279714,FRIENDS_MINUS_ACQUAINTANCES:284920934947802,ONLY_ME:286958161406148,FB_ONLY:411331705596297,EVENT_PUBLIC:1493271774218406,EVENT_INVITE_ONLY:599950423437029},PrivacyField:{CURRENT_COMPOSER:8787670733,DEFAULT_COMPOSER:875106179167765,TIMELINE_TAGGED_CONTENT_VISIBILITY:8787530733,WALL_POSTS:8787370733,TAG_EXPANDED_CONTENT:8787795733,SEARCH_BY_PHONE:8787815733,SEARCH_BY_EMAIL:8787820733,CAN_FRIEND:8787540733,DEPRECATED_APP_DEFAULT:8787700733,SEARCH_BY_NAME:8787755733,SEARCH_BY_CONTACT_INFO:8787760733,SCREENNAME:8787335733,CURRENT_ADDRESS:8787355733,FRIENDS:8787365733,WEBSITE:8787375733,STATUS_UPDATES:8787395733,BIRTHDAY:8787510733,BIRTHYEAR:8787805733,CAN_COMMENT:8787535733,CAN_MESSAGE:8787545733,RELATIONSHIPS:8787550733,PROFILE_PICTURE_ALBUM:8787565733,DASHBOARD_ACTIVITY:8787575733,FAMILY:8787585733,INTERESTED_IN_LOOKING_FOR:8787590733,PLACES:8787620733,NAME_DAY:8787810733,LANGUAGES:8787625733,QUOTATIONS:8787630733,ABOUT_ME:8787635733,POLITICAL:8787640733,RELIGIOUS:8787645733,CURRENT_CITY:8787650733,HOMETOWN:8787655733,PROFILE_LIKES_AND_INTERESTS:8787660733,BLURB:8787665733,OTHER_LIKES_AND_INTERESTS:8787680733,SUBSCRIBERS:8787690733,SUBSCRIBED_TO:8787695733,PERSONAL_CONTACT_DEFAULT:8787765733,PAGE_CONTACT_DEFAULT:8787770733,AUTO_GENERATED_FB_EMAIL:8787775733,SKILLS:8787780733,CUSTOM_GENDERS:237760973066217,LOCATION_DO_NOT_WRITE_DIRECTLY:8787785733,SOCIAL_ADS:7719929599,PLATFORM_ADS:126540474531,BASS_ADS:183468681673909,ACTIVITIES:144331422306930,INTERESTS:113693108715766,MUSIC:172372399483077,BOOKS:100725463352700,GAMES:199298603444535,MOVIES:201146206594049,TV_SHOWS:129665560441221,SPORTS_PLAYED:129991670408857,FAVORITE_TEAMS:225288534151802,FAVORITE_ATHLETES:203380763033334,PEOPLE_I_ADMIRE:210380795648667,FAVORITE_FOODS:585935528106425,FAVORITE_RESTAURANTS:172588449584647,FAVORITE_WEBSITES:180412195459106,CLOTHING_BRANDS:397391233714082,LAST_POST_PRIVACY:314763985364212,SECOND_TO_LAST_POST_PRIVACY:321179124722698,PREVIOUS_SECONDARY_COMPOSER:864562253561430,RECENT_COMPOSER:358304524327898,COMPOSER_CUSTOM_INCLUSION:1067668039947624,COMPOSER_CUSTOM_EXCLUSION:1082068668536535,CAN_LIKE_AND_COMMENT_PUBLIC_PROFILE_MEDIA:1269423589794183,CAN_TAG_PUBLIC_PROFILE_MEDIA:260920744319731,CAN_DOWNLOAD_PUBLIC_PROFILE_MEDIA:410249702663051,CAN_SHARE_PUBLIC_PROFILE_MEDIA:1648969422065270,NOW_COMPOSER:421290164697736,BACKSTAGE_PRIVACY:809506612451171},TagExpansion:{NONE:0,TAGGEES:1,FRIENDS_OF_TAGGEES:2},ExpansionType:{NONE:0,TAGS_ONLY:1}};}),null);
__d('MReactTypeaheadView',['React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,h.Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.Renderer;return h.createElement(l,{data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries,maxSuggestionCount:this.props.maxSuggestionCount});};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MLoadingSpinner.react',['MLoadingIndicator.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,i.Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return i.createElement('div',{className:this.props.className},i.createElement(h,{background:'light',size:'large'}));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d("MTokenCollection.react",["React"],(function a(b,c,d,e,f,g,h){var i,j,k=h.PropTypes;i=babelHelpers.inherits(l,h.Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=this.props.renderer,n=this.props.collection.entries.map(function(o,p){var q=null;return h.createElement(m,{collectionKey:this.props.collectionKey,entry:o,index:p,key:o.id,label:o.display,onRemove:this.props.onRemove,testid:q,truncate:this.props.truncateTokens});},this);return h.createElement("span",{className:this.props.className,onClick:this.props.onClick,role:"presentation"},n);};function l(){"use strict";i.apply(this,arguments);}l.propTypes={className:k.string,collection:k.object.isRequired,collectionKey:k.string,onClick:k.func,onRemove:k.func,renderer:k.func.isRequired,tokenTestIDGenerator:k.func,truncateTokens:k.bool};f.exports=l;}),null);
__d('MTokenRenderer.react',['React','cx','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=h.PropTypes;k=babelHelpers.inherits(n,h.Component);l=k&&k.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$MTokenRenderer1=function(t){t.stopPropagation();t.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}.bind(this),p;}n.prototype.render=function(){'use strict';if(this.props.onRemove)var o="_5snx"+(this.props.truncate?' '+"_p9m":''),p=h.createElement('a',{href:'#',className:o,'data-sigil':'touchable'},h.createElement('span',{className:"_1xe9",onClick:this.$MTokenRenderer1,role:'presentation'},'\u00a0\u00d7\u00a0'));var q="_1xea"+(this.props.truncate?' '+"_p9n":''),r=h.createElement('span',{className:q},this.props.label),s="_5snw"+(this.props.truncate?' '+"_p9o":''),t=h.createElement('input',{type:'hidden',value:this.props.entry.id,name:this.props.collectionKey+'['+this.props.index+']'});return h.createElement('span',babelHelpers['extends']({},this.props,{className:j(this.props.className,s)}),r,p,t);};n.propTypes={collectionKey:m.string,entry:m.object,index:m.number,label:m.string.isRequired,onRemove:m.func,testid:m.string,truncate:m.bool};f.exports=n;}),null);
__d('MReactTypeahead',['DOM','EventEmitter','MPageController','MReactTypeaheadView','MRecentSearchesUpdater','MSearchConst','MSearchTypeaheadLogger','MSearchTypeaheadPerfLoggerUtil','MTypeaheadNullstateSource','MTypeaheadOnDemandSource','MTypeaheadTouchSource','MTypeaheadTouchSourceWithSuggestions','Parent','React','ReactDOM','Stratcom','SubscriptionsHandler','TypeaheadCompositeSource','URI','Vector','csx','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){'use strict';var da,ea,fa=u.PropTypes,ga=10;da=babelHelpers.inherits(ha,u.Component);ea=da&&da.prototype;function ha(){var ja,ka;for(var la=arguments.length,ma=Array(la),na=0;na<la;na++)ma[na]=arguments[na];return ka=(ja=ea.constructor).call.apply(ja,[this].concat(ma)),ia.call(this),ka;}ha.prototype.shouldComponentUpdate=function(ja,ka){if(this.state.resultData!==ka.resultData||this.state.waiting!==ka.waiting)return true;var la=ja.excludedEntries,ma=this.props.excludedEntries;for(var na in la)if(la[na]!==ma[na])return true;for(var oa in ma)if(ma[oa]!==la[oa])return true;if(this.props.configureDataSourceOnNewProps&&this.props.maxSuggestionCount!==ja.maxSuggestionCount)return true;return false;};ha.prototype.componentDidMount=function(){this.refs.input.type="search";if(this.props.configureDataSourceOnNewProps)this.configureDatasource();if(this.props.focusOnMount)this.focusInput();if(this.props.initialInputValue)this.setInputValue(this.props.initialInputValue);};ha.prototype.componentWillUpdate=function(){this.$MReactTypeahead5('render_start');};ha.prototype.componentDidUpdate=function(ja,ka){this.props.onUpdate&&this.props.onUpdate();if(this.props.configureDataSourceOnNewProps&&this.props.maxSuggestionCount!==ja.maxSuggestionCount){this.setDatasource(null);this.configureDatasource();this.query(this.state.query,true);}this.$MReactTypeahead5('rendered');};ha.prototype.render=function(){var ja=this.props.showClearButton&&this.state.query,ka=this.props.typeaheadRootClassName||"_5fn4",la=u.createElement('input',{type:'search',ref:'input',className:'input',autoCorrect:'off',autoComplete:'off',autoCapitalize:'off',name:'query',placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this.$MReactTypeahead8,onChange:this.inputChanged});if(this.props.typeaheadConfig.submitOnEnter)la=u.createElement('form',{ref:'searchForm',action:'/search',className:"_4e7a",onSubmit:this.onSearchFormSubmit},la,u.createElement('input',{type:'hidden',name:'source',value:'typeahead'}));var ma="_5fn6 touchable";if(this.props.useStandardClearButton)ma="_5fn6 touchable mClearButton";var na=this.props.hideSelected?this.$MReactTypeahead6(this.state.resultData):this.state.resultData;return u.createElement('div',{className:this.props.className},u.createElement('div',{className:ka},u.createElement('div',{className:"_5fn5"},la,u.createElement('div',{className:ma,'data-sigil':'touchable',style:{display:ja?'':'none'},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},u.createElement('div',null,'\u00D7')))),u.createElement(k,{ref:'results',Renderer:this.props.presenter.ViewRenderer,data:na,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this.$MReactTypeahead9,maxSuggestionCount:this.props.maxSuggestionCount}));};ha.prototype.$MReactTypeahead11=function(){if(!this.$MReactTypeahead4)this.$MReactTypeahead4=new x();return this.$MReactTypeahead4;};ha.prototype.cleanup=function(){this.$MReactTypeahead10(null);this.$MReactTypeahead4&&this.$MReactTypeahead4.release();};ha.prototype.componentWillUnmount=function(){this.cleanup();};ha.propTypes={onClickItem:fa.func,onBlur:fa.func,onKeyUp:fa.func,onKeyDown:fa.func,onTouchStart:fa.func,placeholder:fa.string,presenter:fa.object.isRequired,showClearButton:fa.bool,typeaheadConfig:fa.object.isRequired,excludedEntries:fa.object,getTypeaheadOnDemandSource:fa.func,getTypeaheadTouchSource:fa.func,getTypeaheadCompositeSource:fa.func,getTypeaheadNullstateSource:fa.func,onFocus:fa.func,simpleSearch:fa.bool,suggestions:fa.array,hideSelected:fa.bool,maxSuggestionCount:fa.number,configureDataSourceOnNewProps:fa.bool,setAllSourceMaxCount:fa.bool,setNullstateData:fa.array,focusOnMount:fa.bool,initialInputValue:fa.string,showSelectedInput:fa.bool};var ia=function ja(){this.state={resultData:[],query:null,waiting:false};this.$MReactTypeahead1=null;this.$MReactTypeahead3=null;this.listen=function(ka,la){this.$MReactTypeahead3=this.$MReactTypeahead3||new i();return this.$MReactTypeahead3.addListener(ka,la.bind(this));}.bind(this);this.$MReactTypeahead5=function(ka,la){this.$MReactTypeahead3&&this.$MReactTypeahead3.emit.apply(this.$MReactTypeahead3,[ka].concat(la));}.bind(this);this.waitForResults=function(){this.setState({waiting:true});}.bind(this);this.showResults=function(ka){if(this.props.setNullstateData!=null&&v.findDOMNode(this.refs.input).value==='')ka=this.props.setNullstateData;if(this.props.hideSelected)ka=this.$MReactTypeahead6(ka);ka.forEach(function(la){la.uri=new z(la.uri).addQueryData('refid',m.refid);return la;});this.setState({resultData:ka,waiting:true},this.$MReactTypeahead7);this.$MReactTypeahead5('show',[ka]);}.bind(this);this.$MReactTypeahead6=function(ka){var la=this.props.excludedEntries;if(la)return ka.filter(function(ma){return !la[ma.id];});return ka;}.bind(this);this.$MReactTypeahead7=function(){if(this.state.query==null)this.setState({waiting:false});}.bind(this);this.complete=function(){this.setState({waiting:false});}.bind(this);this.reset=function(){v.findDOMNode(this.refs.input).value='';this.query('',true);}.bind(this);this.query=function(ka,la){la=la||false;if(la||this.state.query!==ka){this.$MReactTypeahead5('update',[ka]);this.$MReactTypeahead5('change',[ka]);this.setState({query:ka});}}.bind(this);this.inputChanged=function(){if(v.findDOMNode(this.refs.input).value==='')this.query('');}.bind(this);this.onSearchFormSubmit=function(event){event.preventDefault();var ka=v.findDOMNode(this.refs.input),la=ka.value;this.$MReactTypeahead5('query',[this.state.resultData]);var ma=new z('/search/?query').addQueryData('query',la).toString();j.load(ma);}.bind(this);this.setInputValue=function(ka){if(ka)v.findDOMNode(this.refs.input).value=ka;}.bind(this);this.onKeyUp=function(event){var ka=this.getInputValue();this.query(ka);this.props.onKeyUp&&this.props.onKeyUp(event);}.bind(this);this.onClearButtonEvent=function(event){event.preventDefault();this.reset();this.focusInput();}.bind(this);this.getInputValue=function(){return v.findDOMNode(this.refs.input).value;}.bind(this);this.getInputNode=function(){return v.findDOMNode(this.refs.input);}.bind(this);this.getValue=function(){return this.getInputValue();}.bind(this);this.focusInput=function(){v.findDOMNode(this.refs.input).focus();}.bind(this);this.blurInput=function(){v.findDOMNode(this.refs.input).blur();}.bind(this);this.$MReactTypeahead9=function(event,ka,la){this.reset();this.props.onClickItem&&this.props.onClickItem(event,ka,la);if(this.props.showSelectedInput&&ka.name)this.setInputValue(ka.name);this.$MReactTypeahead5('select',[t.bySelector(event.target,"._5fna")]);this.$MReactTypeahead5('result-selected',[ka]);this.forceUpdate();}.bind(this);this.getDisplayedHeight=function(){var ka=v.findDOMNode(this.refs.results),la=aa.getPos(ka).y;return aa.getDim(ka).y+la;}.bind(this);this.getDatasource=function(){return this.$MReactTypeahead1;}.bind(this);this.$MReactTypeahead10=function(ka){if(this.$MReactTypeahead1)this.$MReactTypeahead1.unbindFromTypeahead(this);if(this.$MReactTypeahead2){this.$MReactTypeahead2.release();delete this.$MReactTypeahead2;}this.$MReactTypeahead1=ka;if(!this.$MReactTypeahead1)return;this.$MReactTypeahead2=new x();this.$MReactTypeahead2.addSubscriptions(ka.listen('waiting',this.waitForResults),ka.listen('resultsready',this.showResults),ka.listen('complete',this.complete));ka.bindToTypeahead(this);}.bind(this);this.configureDatasource=function(ka){if(this.$MReactTypeahead1)return;var la=this.props.typeaheadConfig.sources,ma=[],na=new z(la.bootstrapped.src);if(this.props.includeFamilyTags){var oa=na.getQueryData();oa.filter.push('family_tags');na.setQueryData(oa);}var pa=this.getTypeaheadTouchSource(na.toString(),la.bootstrapped.source_key,this.props.suggestions);pa.setShowSecondaryAction(true);pa.reactRendered=true;this.touchSource=pa;ma.push(pa);if(la.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(la.nullstate.src);this.nullstateDataSource.setMaximumResultCount(la.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;ma.push(this.nullstateDataSource);}pa=this.getTypeaheadOnDemandSource(la.online.src);pa.setMaximumResultCount(la.online.max_results);pa.setEnableImmediateReturnOfCachedResults(la.online.enable_caching);if(ka){if(ka.enableQueryThrottle)pa.setThrottleSendRequest(ka.queryThrottleTime);pa.setMaxResults(ka.maxResults);pa.setEnableEagerSendRequest(ka.enableEagerSendRequest);pa.setQueryDelay(ka.queryWaitTime);}pa.setShowSecondaryAction(true);pa.reactRendered=true;ma.push(pa);if(this.props.setAllSourceMaxCount)for(var qa=ma,ra=Array.isArray(qa),sa=0,qa=ra?qa:qa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ta;if(ra){if(sa>=qa.length)break;ta=qa[sa++];}else{sa=qa.next();if(sa.done)break;ta=sa.value;}var ua=ta;ua.setMaximumResultCount(this.props.maxSuggestionCount);}var va=this.getTypeaheadCompositeSource(ma);if(this.props.typeaheadConfig.excludeids)this.props.typeaheadConfig.excludeids.forEach(function(wa){va.addExcludeID(wa);});va.reactRendered=true;va.mergeKey='id';this.$MReactTypeahead10(va);this.$MReactTypeahead5('start');}.bind(this);this.configureMSideNavMarauderLogger=function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this.$MReactTypeahead12)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this.$MReactTypeahead12=true;}.bind(this);this.configureMRecentSearchesUpdater=function(){if(this.props.typeaheadConfig.hasRecentSearches){var ka=new l(this);this.$MReactTypeahead11().addSubscriptions({remove:ka.destroy});}}.bind(this);this.configureMSearchTypeaheadLogger=function(){if(this.$MReactTypeahead13)return;this.$MReactTypeahead11().addSubscriptions(w.listen('m-typeahead-logger:new-session-id',null,this.addSessionIDToSearch));var ka='/search/metrics.php',la=new n(this,ka);this.$MReactTypeahead13=true;this.$MReactTypeahead11().addSubscriptions(w.listen('log-m-search-session-end',null,function(ma){la.blur(ma.getData().reason);}));}.bind(this);this.configureMSearchTypeaheadPerfLogger=function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this.$MReactTypeahead14)return;var ka=o.getNewMSearchTypeaheadPerfLogger(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this.$MReactTypeahead11().addSubscriptions({remove:ka.destroy});this.$MReactTypeahead14=true;}.bind(this);this.addSessionIDToSearch=function(ka){if(!this.refs||!this.refs.searchForm)return;var la=v.findDOMNode(this.refs.searchForm),ma=h.scry(la,'input','search-typeahead-session-id')[0];if(!ma){ma=document.createElement('input');ma.type='hidden';ma.name='tsid';la.appendChild(ma);w.addSigil(ma,'search-typeahead-session-id');}ma.value=ka.getData().sessionID;}.bind(this);this.getTypeaheadCompositeSource=function(ka){if(this.props.getTypeaheadCompositeSource)return this.props.getTypeaheadCompositeSource(ka);return new y(ka);}.bind(this);this.getTypeaheadOnDemandSource=function(ka){if(this.props.getTypeaheadOnDemandSource)return this.props.getTypeaheadOnDemandSource(ka);return new q(ka);}.bind(this);this.getTypeaheadTouchSource=function(ka,la,ma){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(ka,la);if(ma){var na=new s(ka,la,ma);if(this.props.maxSuggestionCount){na.setMaximumResultCount(this.props.maxSuggestionCount);}else na.setMaximumResultCount(ga);return na;}return new r(ka,la);}.bind(this);this.getTypeaheadNullstateSource=function(ka){if(this.props.getTypeaheadNullstateSource)return this.props.getTypeaheadNullstateSource(ka);return new p(ka);}.bind(this);this.getTypeaheadType=function(){var ka='m_side_nav';if(this.props.simpleSearch){ka+='_simple';}else ka+='_gsv2';return ka;}.bind(this);this.updateSuggestionsIds=function(ka){if(this.touchSource)this.touchSource.setSuggestionsIds(ka);if(v.findDOMNode(this.refs.input).value==='')this.reset();}.bind(this);this.$MReactTypeahead8=function(){this.props.onFocus&&this.props.onFocus();this.query(this.getInputValue());}.bind(this);};f.exports=ha;}),null);
__d('MTaggerResultsRow.react',['React','cx','MXUILayout.react','MXUIDiv.react','MXUILayoutColumn.react','MXUILayoutFillColumn.react'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o,p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=o.constructor).call.apply(r,[this].concat(u)),this.state={checked:false},this.$MTaggerResultsRow1=function(){return h.createElement('div',{className:"_5rmb",style:{backgroundImage:'url('+this.props.data.photo+')'}});}.bind(this),this.$MTaggerResultsRow2=function(){var w=this.props.data,x=w.subtext;if(!x)return null;return h.createElement('span',{className:"_5rmc"},x);}.bind(this),this.$MTaggerResultsRow3=function(event){this.setState({checked:!this.state.checked});this.props.onClickItem&&this.props.onClickItem(event,this.props.data,this.props.checked);}.bind(this),s;}q.prototype.render=function(){var r=this.props.data,s=this.props.checked?"_5tbv":'';return h.createElement(k,{'aria-checked':this.state.checked,className:"_5rmd",onClick:this.$MTaggerResultsRow3,role:'checkbox'},h.createElement(j,null,h.createElement(l,{key:'profile_image'},this.$MTaggerResultsRow1()),h.createElement(m,{alignself:'center',className:"_5rme",key:'display_name'},h.createElement('div',null,h.createElement('div',{className:"_5rmf"},r.display||r.name),this.$MTaggerResultsRow2())),h.createElement(l,{key:'check_mark'},h.createElement('div',{className:"_5tbx"},h.createElement('div',{className:s})))));};q.propTypes={data:p.object,onClickItem:p.func};f.exports=q;}),null);
__d('MTaggerTypeaheadPresenter.react',['MTaggerResultsRow.react','React','cx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=i.PropTypes,n=30;k=babelHelpers.inherits(o,i.Component);l=k&&k.prototype;o.prototype.render=function(){var q=this.props.data.slice(0,n).map(function(r){var s=false;if(this.props.excludedEntries)s=!!this.props.excludedEntries[r.id];return i.createElement(h,{key:r.id,data:r,onClickItem:this.props.onClickItem,checked:s});},this);return i.createElement('div',{className:"_53na",onTouchStart:this.props.onTouchStart},q);};function o(){k.apply(this,arguments);}o.propTypes={query:m.string,data:m.array,onClickItem:m.func,onTouchStart:m.func,excludedEntries:m.object};var p={ViewRenderer:o};f.exports=p;}),null);
__d("TokenCollection",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.entries=[];}h.prototype.addEntry=function(i){"use strict";if(!this.hasEntry(i))this.entries.push(i);return this;};h.prototype.removeEntry=function(i){"use strict";if(this.hasEntry(i)){var j=0;while(j<this.entries.length){if(this.entries[j].id===i.id)break;j++;}this.entries.splice(j,1);}return this;};h.prototype.hasEntry=function(i){"use strict";var j=i.id;return this.entries.some(function(k){return k.id===j;});};h.prototype.shallowClone=function(){"use strict";var i=new h();i.entries=this.entries.slice(0);return i;};f.exports=h;}),null);
__d('MTokenizer.react',['React','ReactComponentRenderer','MReactTypeahead','MTaggerTypeaheadPresenter.react','MTokenCollection.react','MTokenRenderer.react','TokenCollection','MViewport','Vector','Keys','MLegacyDataStore','cx','fbt','joinClasses'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w,x=h.PropTypes;v=babelHelpers.inherits(y,h.Component);w=v&&v.prototype;function y(){var z,aa;'use strict';for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return aa=(z=w.constructor).call.apply(z,[this].concat(ca)),this.state={focus:false},this.init=function(){this.initWithoutFocus();this.refs.typeahead.focusInput();}.bind(this),this.initWithoutFocus=function(){this.refs.typeahead.configureDatasource();this.forceUpdate();this.refs.typeahead.reset();}.bind(this),this.cleanup=function(){this.refs.typeahead.cleanup();}.bind(this),this.updateTypeahead=function(){this.forceUpdate();}.bind(this),this.onRemoveFromCollection=function(ea){this.$MTokenizer1.removeEntry(ea);this.props.onRemove&&this.props.onRemove(ea);this.forceUpdate();}.bind(this),this.$MTokenizer3=function(ea){if(!this.state.focus){ea.preventDefault();this.refs.typeahead.focusInput();this.setState({focus:true});}}.bind(this),this.$MTokenizer7=function(){if(this.$MTokenizer2===null)this.$MTokenizer2=o.getScrollTop();}.bind(this),this.$MTokenizer8=function(){if(this.$MTokenizer2!==null)o.scrollTo(0,this.$MTokenizer2);this.$MTokenizer2=null;}.bind(this),this.$MTokenizer5=function(event){if(this.props.scrollToTypeahead){this.$MTokenizer7();var ea=this.refs.typeahead.getInputNode(),fa=p.getPos(ea).y;o.scrollTo(0,fa);}if(event.nativeEvent.keyCode===q.BACKSPACE)this.$MTokenizer9();}.bind(this),this.$MTokenizer4=function(){if(this.props.scrollToTypeahead)this.$MTokenizer8();this.props.onInputBlur&&this.props.onInputBlur();if(this.state.focus)this.setState({focus:false});}.bind(this),this.$MTokenizer6=function(event,ea,fa){if(fa){this.onRemoveFromCollection(ea);}else{this.$MTokenizer1.addEntry(ea);this.props.onAdd&&this.props.onAdd(ea);}if(this.props.hideSelected)setTimeout(function(){this.refs.typeahead.focusInput();}.bind(this),0);event.stopPropagation();this.forceUpdate();}.bind(this),this.getEntries=function(){return this.$MTokenizer1.entries;}.bind(this),this.setEntries=function(ea){this.$MTokenizer1.entries=ea;}.bind(this),this.$MTokenizer9=function(){var ea=this.getEntries();if(ea&&ea.length&&!this.refs.typeahead.getInputValue())this.$MTokenizer1.removeEntry(ea[ea.length-1]);this.forceUpdate();}.bind(this),this.updateSuggestionsIds=function(ea){this.init();this.updateTypeaheadWithSuggestions(ea);}.bind(this),this.updateTypeaheadWithSuggestions=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);}.bind(this),this.focusAndUpdateSuggestionsIDs=function(ea){this.refs.typeahead.updateSuggestionsIds(ea);this.refs.typeahead.focusInput();}.bind(this),aa;}y.prototype.componentWillMount=function(){'use strict';this.$MTokenizer1=new n();this.$MTokenizer2=null;};y.prototype.componentWillUnmount=function(){'use strict';this.cleanup();};y.prototype.render=function(){'use strict';var z=this.$MTokenizer1.entries||[],aa={},ba=z&&z.length>0;if(ba)for(var ca=0;ca<z.length;++ca)aa[z[ca].id]=true;if(this.props.excludedEntries)for(var da in this.props.excludedEntries)aa[da]=this.props.excludedEntries[da];var ea=ba?null:this.props.placeholder;return h.createElement('div',babelHelpers['extends']({},this.props,{className:u(this.props.className,"_5snt"),onClick:this.$MTokenizer3}),h.createElement(l,{ref:'collection',collection:this.$MTokenizer1,collectionKey:this.props.collectionKey,renderer:m,onRemove:this.onRemoveFromCollection}),h.createElement(j,{ref:'typeahead',className:"_5snu",typeaheadRootClassName:"_5snv",excludedEntries:aa,placeholder:ea,presenter:this.props.presenter,typeaheadConfig:this.props.typeaheadConfig,includeFamilyTags:this.props.includeFamilyTags,onBlur:this.$MTokenizer4,onKeyDown:this.$MTokenizer5,onClickItem:this.$MTokenizer6,suggestions:this.props.suggestions,hideSelected:this.props.hideSelected,maxSuggestionCount:this.props.maxSuggestionCount}));};y.propTypes={placeholder:x.string,typeaheadConfig:x.object.isRequired,presenter:x.object.isRequired,excludedEntries:x.object,collectionKey:x.string,onInputBlur:x.func,includeFamilyTags:x.bool,hideSelected:x.bool,onAdd:x.func,onRemove:x.func,maxSuggestionCount:x.number,scrollToTypeahead:x.bool};y.init=function(z){var aa=t._("Start typing a name..."),ba=r.get(z.container);ba.tokenizer=new i(y,z.container);ba.tokenizer.setProps({placeholder:aa,presenter:k,typeaheadConfig:z.typeaheadConfig,suggestions:z.suggestions,hideSelected:z.hideselected,collectionKey:z.collectionKey});ba.tokenizer.component.init();};f.exports=y;}),null);
__d('MCompositionUserActions',['MComposition','MCompositionConfigFields','MCompositionDispatcher','MCompositionShareFields','MCompositionStoreID','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m=c('MCompositionConstants').ActionTypes;function n(p,q){j.handleUpdateFromUserAction({actionType:p,data:q});}var o={configDisablePhotosUpdate:function p(q){var r={};r[l.CONFIG]={};r[l.CONFIG][i.DISABLE_PHOTOS]=q;n(m.DISABLE_PHOTOS,r);},finalize:function p(){n(m.COMPOSITION_FINALIZE,{});},initialize:function p(q){n(m.COMPOSITION_INITIALIZE,q||{});},shareLinkUpdate:function p(q){var r={};r[l.SHARE]={};r[l.SHARE][k.SHARE_URI]=q;n(m.SHARE_LINK_UPDATE,r);},shareRemoveLinkPreview:function p(q){var r={};r[q]=true;var s={};s[l.SHARE]={};s[l.SHARE][k.DISABLED_LINKS]=r;n(m.SHARE_REMOVE_PREVIEW,s);},minutiaeRemove:function p(){n(m.MINUTIAE_REMOVE,{});},minutiaeSet:function p(q){var r={};r[l.MINUTIAE]=q;n(m.MINUTIAE_SET,r);},photoUpdate:function p(q){var r={};r[l.PHOTO]=q;n(m.PHOTO_CHANGE,r);},placeRemove:function p(){n(m.PLACE_REMOVE,{});},placeSet:function p(q){n(m.PLACE_SET,new h().setStoreData(l.PLACE,q).serialize());},statusUpdate:function p(q){n(m.STATUS_CHANGE,new h().setStoreData(l.STATUS,q).serialize());},withUpdate:function p(q){var r={};r[l.WITH_TAGS]=q;n(m.WITH_CHANGE,r);},groupSellUpdate:function p(q){n(m.GROUP_SELL_UPDATE,new h().setStoreData(l.GROUP_SELL,q).serialize());},privacyUpdate:function p(q){var r={};r[l.PRIVACY]=q;n(m.PRIVACY_CHANGE,r);},formatUpdate:function p(q){var r;n(m.FORMAT_CHANGE,(r={},r[l.FORMAT]=q,r));}};f.exports=o;}),null);
__d('MCompositionPrivacyStore',['MCompositionStore','MCompositionPrivacyFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('MCompositionConstants').ActionTypes,m=new h(j.PRIVACY,i).setRequiredFields(i.PRIVACY_FBID).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.PRIVACY_CHANGE,k.thatReturnsArgument).register();f.exports=m;}),null);
__d('MCompositionShareStore',['MCompositionStore','MCompositionShareFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('MCompositionConstants').ActionTypes,m=new h(j.SHARE,i).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.SHARE_LINK_UPDATE,function(n){return babelHelpers['extends']({},m.getAll(),n);}).setHandlerFor(l.SHARE_REMOVE_PREVIEW,function(n){n=n||{};var o=i.DISABLED_LINKS,p=m.getAll(),q={};q[o]=babelHelpers['extends']({},p[o],n[o]);q[i.SHARE_URI]=null;q[i.LINK_NO_CHANGE]=false;return babelHelpers['extends']({},p,q);}).register();f.exports=m;}),null);
__d('MFriendsTaggerReact',['MLegacyDataStore','DOM','getActiveElement','createDeprecatedProperties','eventsMixinDeprecated','invariant','$'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p){'use strict';this.setRoot(p);i.listen(this.getRoot(),'click',null,this.$MFriendsTaggerReact1.bind(this));}o.prototype.hide=function(){'use strict';j().blur();i.hide(this.getRoot());};o.prototype.show=function(){'use strict';i.show(this.getRoot());this.getTokenizer().component.init();this.onShow&&this.onShow();};o.prototype.clear=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);if(q.tokenizer){this.setEntries([]);this.onClear&&this.onClear();}};o.prototype.hasTokens=function(){'use strict';return this.getEntries().length>0;};o.prototype.getTokens=function(){'use strict';return this.getEntries().reduce(function(p,q){p[q.id]=q;return p;},{});};o.prototype.removeToken=function(p){'use strict';this.getTokenizer().component.onRemoveFromCollection(p);};o.prototype.getEntries=function(){'use strict';return this.getTokenizer().component.getEntries();};o.prototype.setEntries=function(p){'use strict';this.getTokenizer().component.setEntries(p);};o.prototype.$MFriendsTaggerReact1=function(event){'use strict';if(event.getNode('cancel_with_tagger')){this.$MFriendsTaggerReact2();}else if(event.getNode('submit_with_tagger'))this.$MFriendsTaggerReact3();};o.prototype.$MFriendsTaggerReact2=function(){'use strict';this.hide();this.invoke('cancel',{});};o.prototype.$MFriendsTaggerReact3=function(){'use strict';var p=this.getEntries();this.hide();this.invoke('submit',{tokens:p});};o.prototype.getTokenizer=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);q||m(0);q.tokenizer||m(0);return q.tokenizer;};o.prototype.setOnShow=function(p){'use strict';this.onShow=p;};o.prototype.setOnClear=function(p){'use strict';this.onClear=p;};o.fromID=function(p){'use strict';var q=n(p),r=h.get(q);if(!r.$MFriendsTaggerReact4)r.$MFriendsTaggerReact4=new o(q);return r.$MFriendsTaggerReact4;};o.getFriendIds=function(event){'use strict';if(event.friend_ids)return event.friend_ids;return event.tokens.map(function(p){return p.id;});};k(o,{root:null});l(o,['submit','cancel']);f.exports=o;}),null);
__d('MPlacesCategorySelector',['MLegacyDataStore','DOM','MRequest','Stratcom','createDeprecatedProperties','eventsMixinDeprecated'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(o){'use strict';this._root=o;this._listeners=[k.listen('click',[o.getAttribute('data-sigil'),'cancel_places_category_selector'],this._cancel.bind(this)),k.listen('click',[o.getAttribute('data-sigil'),'category_option'],this._submit.bind(this))];this._currentlyMakingServerRequest=false;this._viewcount=1;}n.prototype.hide=function(){'use strict';i.hide(this._root);};n.prototype.show=function(){'use strict';i.show(this._root);};n.prototype.cleanup=function(){'use strict';while(this._listeners.length)this._listeners.pop().remove();};n.prototype._hideCurrentChild=function(){'use strict';for(var o=0;o<this._viewcount-1;o++){if(!this._root.childNodes[o])return;i.hide(this._root.childNodes[o]);}};n.prototype._showCurrentChild=function(){'use strict';if(this._viewcount>=1){var o=this._getCurrentVisibleView();i.show(o);}};n.prototype._deleteLastChild=function(){'use strict';var o=this._root.childElementCount;if(o>=1)i.remove(this._root.childNodes[o-1]);};n.prototype._deleteAllChildren=function(){'use strict';var o=this._root.childElementCount;for(var p=o-1;p>=1;p--)i.remove(this._root.childNodes[p]);if(o>=1)i.show(this._root.childNodes[0]);this._viewcount=1;};n.prototype._getCurrentVisibleView=function(){'use strict';return this._root.childNodes[this._viewcount-1];};n.prototype._submit=function(event){'use strict';if(this._currentlyMakingServerRequest)return;var o=this._getCurrentVisibleView(),p=i.find(o,'*','loading'),q=i.find(o,'div','category-list-view'),r=h.get(event.getNode('category_option'));if(r.haschildren){this._currentlyMakingServerRequest=true;this._hideCurrentChild();i.show(p);i.hide(q);var s=new j('/places/addform/category.php');s.listen('done',function(){this._viewcount=this._viewcount+1;this._hideCurrentChild();this._currentlyMakingServerRequest=false;i.hide(p);i.show(q);}.bind(this));s.addData({parent_category_id:r.id,target_id:this._root.id});s.setMethod('GET');s.send();}else{this._deleteAllChildren();this._currentid=null;var t={category_name:r.name,category_value:r.id};this.hide();this.invoke('submit',t);}event.kill();};n.prototype._cancel=function(event){'use strict';if(this._currentlyMakingServerRequest)return;if(this._viewcount>1){this._deleteLastChild();this._viewcount--;this._showCurrentChild();}else{this.hide();this.invoke('cancel');}};m(n,['submit','cancel']);l(n,{disableFacewebHooks:false});Object.assign(n.prototype,{_root:null,_currentlyMakingServerRequest:null,_viewcount:null});f.exports=n;}),null);
__d('MPlacesAddView',['DOM','FBJSON','MPlacesCategorySelector','MRequest','Stratcom','ge'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=null,ha=null,ia=null,ja=true,ka={init:function la(ma){n=m(ma);if(!n)return;t=h.scry(n,'div','places-category-selector-container')[0];if(t){q=new j(t);p=h.find(n,'div','add-place-form');u=h.find(n,'div','new-place-name');v=h.find(u,'input','');w=h.find(n,'div','new-place-address');x=h.find(w,'input','');y=h.find(n,'div','new-place-phone');z=h.find(y,'input','');aa=h.find(n,'div','new-place-website');ba=h.find(aa,'input','');ca=h.find(n,'div','new-place-zip');da=h.find(ca,'input','');ga=h.scry(n,'input','is_current')[0];r=h.find(n,'span','category_input_display_text');s=h.scry(n,'input','category_input_value')[0];ea=h.scry(n.parentNode.parentNode,'div','place-header')[0];fa=h.find(n,'div','address-error-box');}else v=h.find(n,'input','new-place-name');o=h.find(n,'button','add_place_submit');this._listeners=[l.listen('click','add_place_submit',ka._verifyAndSubmitAddPlace.bind(this)),l.listen('MStructuredComposer:cleanup',null,ka._cleanup.bind(this)),l.listen('m:places:map:move',null,function(event){ha=event.getData().lat;ia=event.getData().lng;}),l.listen('m:places:map:render',null,function(event){var na=i.parse(event.getData(),f.id);ha=na.latitude;ia=na.longitude;})];v.addEventListener('focus',function(){if(ja){v.blur();ja=false;}});if(t){this._listeners.push(l.listen('click','category-selector',ka._showCategorySelector.bind(this)));this._listeners.push(q.listen('cancel',ka._cancelCategorySelector.bind(this)));this._listeners.push(q.listen('submit',ka._submitCategorySelector.bind(this)));}},_cleanup:function la(){while(this._listeners.length)this._listeners.pop().remove();if(q)q.cleanup();},_showCategorySelector:function la(event){if(ea)h.hide(ea);h.hide(p);h.show(t);event.kill();},_showAddButton:function la(){if(!s.value)return false;return true;},_updateCategorySelector:function la(ma){if(r&&ma){var na=ma.category_name,oa=ma.category_value;h.setContent(r,na);if(oa.length!==0){s.value=oa;if(o.disabled&&ka._showAddButton())o.disabled=false;}}},_submitCategorySelector:function la(event){ka._updateCategorySelector(event);h.hide(t);h.show(p);l.invoke('m:places:addplace:show');ja=true;if(ea)h.show(ea);},_cancelCategorySelector:function la(){h.hide(t);h.show(p);l.invoke('m:places:addplace:show');ja=true;if(ea)h.show(ea);},_verifyAndSubmitAddPlace:function la(event){var ma={new_place:true,name:v.value};if(t){ma.phone=z.value;ma.address=x.value;ma.website=ba.value;ma.zip=da.value;}ma.is_current=true;if(ga)ma.is_current=ga.checked;if(ha){ma.latitude=ha;ma.longitude=ia;}if(s){ma.topic_tokens=s;}else{var na=h.scry(n,'span','token');ma.topic_tokens=na;}if(ma.address){var oa=new k('/places/addform/verifyaddress.php');oa.listen('done',function(pa){if(pa.actions.length===1){this._submitData(ma,event);}else event.kill();}.bind(this));oa.setData({address:ma.address,latitude:ma.latitude,longitude:ma.longitude,target_id:fa.id}).setMethod('GET').send();}else this._submitData(ma,event);},_submitData:function la(ma,event){if(ma.name.length!==0){h.hide(n);l.invoke('m:places:addform:submit',null,ma);}else event.kill();}};f.exports=ka;}),null);
__d('MPlacesTagger',['MLegacyDataStore','DOM','MParent','MPlaces','MRequest','Stratcom','MTaggingCounter','MTaggingCounterEvent','$','eventsMixinDeprecated','fbt','FWLoader'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=c('FWLoader').FW;function t(u,v){'use strict';this._root=u;this._addPlaceView=i.find(u,'div','add-place');this._disableFacewebHooks=false;this._errorMessage=i.find(u,'div','error-message');this._isOpen=false;this._searchView=i.find(u,'div','places-search');this._throbber=i.find(u,'div','throbber');this._locationToggle=i.scry(u,'div','location-toggle')[0];this._newPlaceName=i.scry(u,'div','new-place-name')[0];this._overrideLocation=v;if(this._newPlaceName){this._newPlaceNameTextbox=i.find(this._newPlaceName,'input','');}else this._newPlaceNameTextbox=i.find(this._addPlaceView,'input','new-place-name');if(!window.FW_ENABLED)this._placeHeader=i.find(u,'div','place-header');this._listeners=[m.listen('click','cancel_at_tagger',this._cancel.bind(this)),m.listen('click','place_result',this._submit.bind(this)),m.listen('click','add_place_link',this._showAddPlace.bind(this)),m.listen('click','freeform_link',this._submitFreeformPlace.bind(this)),m.listen('click','get-location',this._getLocation.bind(this)),m.listen('click','abort-location',this._abortLocation.bind(this)),m.listen('m:places:addform:submit',null,this._submitAddPlace.bind(this)),m.listen('m:page:unload',null,this.cleanup.bind(this))];}t.prototype.cleanup=function(){'use strict';for(var u=0;u<this._listeners.length;u++)this._listeners[u].remove();this._listeners=[];};t.prototype.getDisableFacewebHooks=function(){'use strict';return this._disableFacewebHooks;};t.prototype.getRoot=function(){'use strict';return this._root;};t.prototype.hide=function(){'use strict';if(window.FW_ENABLED)s.setNavBarButton('','1;');i.hide(this._addPlaceView);i.show(this._searchView);i.hide(this._root);this._isOpen=false;};t.prototype.setDisableFacewebHooks=function(u){'use strict';this._disableFacewebHooks=u;};t.prototype.show=function(){'use strict';this._isOpen=true;if(this._locationToggle)i.hide(this._throbber);if(window.FW_ENABLED){s.setNavBarButton(r._("Cancel"),this._cancel.bind(this));}else if(this._locationToggle&&!this._hasLocation)i.show(this._locationToggle);if(this._locationToggle){this._showed();}else if(this._overrideLocation){setTimeout(function(){m.invoke('m:quicksearch:places:search-with-location',null,this._overrideLocation);this._showed();}.bind(this),0);}else if(!this._hasLocation&&'geolocation' in navigator){n.logEvent(o.GEO_POPUP_LOAD);this._locationListener=m.listen('location-update',null,this._handleLocationUpdate.bind(this));this._errorListener=m.listen('location-error',null,this._handleLocationError.bind(this));k.monitorLocation();}else this._showed();i.show(this._root);};t.prototype._getLocation=function(){'use strict';if(!this._hasLocation&&'geolocation' in navigator){this._locationListener=m.listen('location-update',null,this._handleLocationUpdate.bind(this));this._errorListener=m.listen('location-error',null,this._handleLocationError.bind(this));i.show(this._throbber);i.hide(this._locationToggle);k.monitorLocation();}};t.prototype._abortLocation=function(){'use strict';i.hide(this._throbber);i.hide(this._locationToggle);i.hide(this._errorMessage);};t.prototype._removeListeners=function(){'use strict';this._locationListener.remove();this._errorListener.remove();};t.prototype._handleLocationUpdate=function(event){'use strict';this._removeListeners();this._hasLocation=true;m.invoke('m:quicksearch:places:search');if(!this._locationToggle)n.logEvent(o.GEO_POPUP_SUCCESS);this._showed();};t.prototype._handleLocationError=function(event){'use strict';this._removeListeners();this._hasLocation=false;i.show(this._errorMessage);i.hide(this._throbber);if(this._locationToggle){i.show(this._locationToggle);}else n.logEvent(o.GEO_POPUP_FAIL);this._showed();};t.prototype._showed=function(){'use strict';if(!this._isOpen)return;if(window.FW_ENABLED&&!this.getDisableFacewebHooks()){s.setNavBarTitle(r._("Add a Place"));s.setNavBarButton(r._("Cancel"),this._cancel.bind(this),s.BUTTON_CANCEL,false,'left');}this.invoke('showed');i.show(this._root);};t.prototype._cancel=function(){'use strict';if(!this.invoke('cancel').getPrevented()){m.invoke('m:quicksearch:places:cancel');this.hide();}};t.prototype._submit=function(event){'use strict';if(j.bySigil(event.getTarget(),'place-tagger')!==this._root)return;var u=h.get(event.getNode('place_result'));u.new_place=false;this._placeResult=u;m.invoke('m:quicksearch:places:click',null,{results:event.getNode('id:places_search_results'),selected_result:event.getNode('place_result')});this.invoke('submit',u);event.kill();};t.prototype._showAddPlace=function(event){'use strict';var u=h.get(event.getNode('add_place_link')).name;this._newPlaceNameTextbox.value=u;i.hide(this._searchView);i.show(this._addPlaceView);var v=i.scry(this._addPlaceView,'*','map_view_container')[0];if(v)new l('/places/showmap.php').addData({target_id:v.id}).setMethod('GET').send();m.invoke('m:places:addplace:show');event.kill();};t.prototype._submitAddPlace=function(event){'use strict';var u=event.getData();this.hide();this.invoke('submit',u);event.kill();};t.prototype._submitFreeformPlace=function(event){'use strict';var u=h.get(event.getNode('freeform_link'));this.hide();this.invoke('submit',u);event.kill();};t.fromID=function(u){'use strict';var v=p(u),w=h.get(v);if(!w._placesTagger)w._placesTagger=new t(v);return w._placesTagger;};q(t,['searching','showed','submit','cancel']);Object.assign(t.prototype,{_hasLocation:false,_locationListener:null,_errorListener:null,_root:null,_addPlaceView:null,_errorMessage:null,_newPlaceName:null,_newPlaceNameTextbox:null,_searchView:null,_throbber:null,_listeners:null,_placeResult:null});f.exports=t;}),null);
__d('MStructuredComposerTaggingInputReact',['React'],(function a(b,c,d,e,f,g,h){var i,j,k="xy_tags",l='failed_suggestions';i=babelHelpers.inherits(m,h.Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MStructuredComposerTaggingInputReact1=function(s,t,u,v){var w=k+"["+v+"]";return h.createElement('div',{key:"tag"+s.fbid},h.createElement('input',{type:'hidden',name:w+"[x]",value:s.x}),h.createElement('input',{type:'hidden',name:w+"[y]",value:s.y}),h.createElement('input',{type:'hidden',name:w+"[fbid]",value:s.photoID}),h.createElement('input',{type:'hidden',name:w+"[name]",value:u}),h.createElement('input',{type:'hidden',name:w+"[subject]",value:t}),h.createElement('input',{type:'hidden',name:w+"[facebox]",value:s.fbid}),h.createElement('input',{type:'hidden',name:w+"[source]",value:'photos_touch_composer'}));},this.$MStructuredComposerTaggingInputReact2=function(){var s=this.props.tokenCollection,t=this.props.tagSuggestions,u=[],v=0;s.map(function(w){var x=t[w.id];if(x)u=u.concat(Object.keys(x).map(function(y){var z=this.$MStructuredComposerTaggingInputReact1(x[y],w.id,w.name,v);v++;return z;}.bind(this)));}.bind(this));return u;}.bind(this),this.$MStructuredComposerTaggingInputReact3=function(s,t){var u=l+"["+t+"]";return h.createElement('div',{key:"failed"+s.fbid},h.createElement('input',{type:'hidden',name:u+"[fbid]",value:s.fbid}),h.createElement('input',{type:'hidden',name:u+"[tagee]",value:s.recognitions[0].user.fbid}));},o;}m.prototype.render=function(){'use strict';return h.createElement('div',null,this.$MStructuredComposerTaggingInputReact2(),this.props.failedSuggestions.map(this.$MStructuredComposerTaggingInputReact3));};f.exports=m;}),null);
__d("XPhotosGetRecognitionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/photos\/tagging\/recognition\/",{photos:{type:"IntVector"},recognition_project:{type:"String",defaultValue:"default"},include_unrecognized_faceboxes:{type:"Bool",defaultValue:false},is_page:{type:"Bool",defaultValue:false},target:{type:"Int"},include_face_crop_src:{type:"Bool",defaultValue:false},include_recognized_user_profile_picture:{type:"Bool",defaultValue:false},include_low_confidence_recognitions:{type:"Bool",defaultValue:false},face_crop_width:{type:"Int",defaultValue:32},face_crop_height:{type:"Int",defaultValue:32}});}),null);
__d('MTagSuggestionsPoller',['MRequest','XPhotosGetRecognitionController','PhotosUploadWaterfallXMixin','mixin','performanceNow','PUWSteps'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p=4,q=2000,r=8000;n=babelHelpers.inherits(s,k(j));o=n&&n.prototype;function s(){'use strict';o.constructor.call(this);this.$MTagSuggestionsPoller1=q;this.$MTagSuggestionsPoller2=0;this.$MTagSuggestionsPoller3={};this.$MTagSuggestionsPoller4=false;this.$MTagSuggestionsPoller5=null;}s.prototype.setRecognitionProject=function(t){'use strict';this.$MTagSuggestionsPoller6=t;return this;};s.prototype.setIncludeUnrecognized=function(t){'use strict';this.$MTagSuggestionsPoller7=t;return this;};s.prototype.setTargetIsPage=function(t){'use strict';this.$MTagSuggestionsPoller8=t;return this;};s.prototype.setTargetId=function(t){'use strict';this.$MTagSuggestionsPoller9=t;return this;};s.prototype.setHandler=function(t){'use strict';this.$MTagSuggestionsPoller10=t;return this;};s.prototype.setTimeoutHandler=function(t){'use strict';this.$MTagSuggestionsPoller11=t;return this;};s.prototype.isPolling=function(){'use strict';return this.$MTagSuggestionsPoller4;};s.prototype.setWaterfall=function(t,u,v){'use strict';this.$MTagSuggestionsPoller12=t;this.$MTagSuggestionsPoller13=u;this.$MTagSuggestionsPoller14=v;return this;};s.prototype.addPhotoIDAndLog=function(t,u){'use strict';this.$MTagSuggestionsPoller3[t]=u;this.logStep(m.CLIENT_FACEREC_BEGIN,{fbid:t});this.invalidateTimeout();this.startMasterTimerIfNeeded();};s.prototype.removePhotoID=function(t){'use strict';delete this.$MTagSuggestionsPoller3[t];};s.prototype.hasPhotoID=function(t){'use strict';return Object.prototype.hasOwnProperty.call(this.$MTagSuggestionsPoller3,t);};s.prototype.$MTagSuggestionsPoller15=function(t){'use strict';return this.$MTagSuggestionsPoller3[t];};s.prototype.startMasterTimerIfNeeded=function(){'use strict';if(!this.$MTagSuggestionsPoller5){this.$MTagSuggestionsPoller16=l();this.$MTagSuggestionsPoller5=setTimeout(this.$MTagSuggestionsPoller17.bind(this),r);}};s.prototype.invalidateTimeout=function(){'use strict';this.$MTagSuggestionsPoller2=0;if(this.$MTagSuggestionsPoller5){clearTimeout(this.$MTagSuggestionsPoller5);this.$MTagSuggestionsPoller5=null;}};s.prototype.start=function(){'use strict';var t=this.$MTagSuggestionsPoller18();if(t.length>0){this.$MTagSuggestionsPoller4=true;this.$MTagSuggestionsPoller2++;this.startMasterTimerIfNeeded();var u=new h(this.$MTagSuggestionsPoller19(t));this.$MTagSuggestionsPoller20=u;u.listen('done',function(v){this.$MTagSuggestionsPoller21(v);}.bind(this));u.listen('error',function(v){this.$MTagSuggestionsPoller22(v);}.bind(this));u.setTimeout(r);u.send();}};s.prototype.$MTagSuggestionsPoller17=function(){'use strict';this.$MTagSuggestionsPoller11&&this.$MTagSuggestionsPoller11(this.$MTagSuggestionsPoller23());this.abort();};s.prototype.abort=function(){'use strict';this.$MTagSuggestionsPoller4=false;for(var t in this.$MTagSuggestionsPoller3)this.logStep(m.CLIENT_FACEREC_FAIL,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,fbid:t});this.$MTagSuggestionsPoller3={};this.invalidateTimeout();if(this.$MTagSuggestionsPoller20){this.$MTagSuggestionsPoller20&&this.$MTagSuggestionsPoller20.abort();this.$MTagSuggestionsPoller20=null;}};s.prototype.$MTagSuggestionsPoller21=function(t){'use strict';if(t.payload){var u=t.payload.filter(function(v){var w=v.fbid,x=this.hasPhotoID(w);if(x){v.attachmentID=this.$MTagSuggestionsPoller15(w);this.removePhotoID(w);this.logStep(m.CLIENT_FACEREC_SUCCESS,{attempt_number:this.$MTagSuggestionsPoller2,elapsed_time:l()-this.$MTagSuggestionsPoller16,xy_tag_count:v.faceboxes.length,fbid:w});}return x;}.bind(this));if(u.length>0)this.$MTagSuggestionsPoller10(u);}this.restart();};s.prototype.$MTagSuggestionsPoller22=function(t){'use strict';this.restart();};s.prototype.restart=function(){'use strict';if(this.$MTagSuggestionsPoller2<p){setTimeout(this.start.bind(this),this.$MTagSuggestionsPoller1);}else this.$MTagSuggestionsPoller17();};s.prototype.$MTagSuggestionsPoller18=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(u);return t;};s.prototype.$MTagSuggestionsPoller23=function(){'use strict';var t=[];for(var u in this.$MTagSuggestionsPoller3)t.push(this.$MTagSuggestionsPoller3[u]);return t;};s.prototype.$MTagSuggestionsPoller19=function(t){'use strict';var u=i.getURIBuilder().setIntVector('photos',t).setString('recognition_project',this.$MTagSuggestionsPoller6).setBool('include_unrecognized_faceboxes',this.$MTagSuggestionsPoller7).setBool('is_page',this.$MTagSuggestionsPoller8).setInt('target',this.$MTagSuggestionsPoller9).getURI();return u;};s.prototype.getWaterfallID=function(){'use strict';return this.$MTagSuggestionsPoller12;};s.prototype.getWaterfallAppName=function(){'use strict';return this.$MTagSuggestionsPoller13;};s.prototype.getWaterfallSource=function(){'use strict';return this.$MTagSuggestionsPoller14;};f.exports=s;}),null);
__d('MTagSuggestionsController',['MTagSuggestionsPoller','React','ReactDOM','MStructuredComposerTaggingInputReact','DOM','BanzaiODS'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n='mtouch_composer_facerec_suggestions';function o(p,q,r,s,t,u){'use strict';this.$MTagSuggestionsController1=p;this.$MTagSuggestionsController1.setOnShow(this.onTokenizerInit.bind(this));this.$MTagSuggestionsController1.setOnClear(this.reset.bind(this));this.$MTagSuggestionsController2=q.getUploader();this.$MTagSuggestionsController3=t;this.$MTagSuggestionsController3.setOnEntriesChangedHandler(this.$MTagSuggestionsController4.bind(this));this.$MTagSuggestionsController5=0;this.$MTagSuggestionsController2.setProps({onUploadSuccess:this.onPhotoUploadSuccess.bind(this),onRemove:this.removeFaceboxesByPhotoID.bind(this)});this.$MTagSuggestionsController6=new h().setRecognitionProject('composer_facerec').setIncludeUnrecognized(true).setTargetIsPage(r==='page').setTargetId(s).setHandler(function(v){this.handleFaceboxResponse(v);}.bind(this)).setTimeoutHandler(function(v){this.onPollerTimeout(v);}.bind(this)).setWaterfall(this.$MTagSuggestionsController2.component.getWaterfallID(),this.$MTagSuggestionsController2.component.getWaterfallAppName(),this.$MTagSuggestionsController2.component.getWaterfallSource());this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController9={};this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController12=!!u;}o.prototype.onTokenizerInit=function(){'use strict';if(Object.keys(this.$MTagSuggestionsController9).length>0)this.updateTypeaheadWithFaceboxSuggestions();if(!this.$MTagSuggestionsController10){this.$MTagSuggestionsController10=true;this.$MTagSuggestionsController1.getTokenizer().setProps({onAdd:this.$MTagSuggestionsController13.bind(this),onRemove:this.$MTagSuggestionsController14.bind(this)});}};o.prototype.$MTagSuggestionsController13=function(p){'use strict';this.$MTagSuggestionsController11[p.id]=true;};o.prototype.$MTagSuggestionsController14=function(p){'use strict';delete this.$MTagSuggestionsController11[p.id];if(p.autoTag)m.bumpEntityKey(n,'remove_auto_tag');};o.prototype.$MTagSuggestionsController15=function(p){'use strict';var q={};p.forEach(function(w){q[w.id]=true;});for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(!t.tagUserID){if(!t.ignoreRecognition){var u=t.recognitions[0].user.fbid,v=t.recognitions[0].user.name;if(q[u]){t.tagUserID=u;t.tagName=v;}}}else if(!q[t.tagUserID]){if(this.$MTagSuggestionsController8[t.tagUserID]&&t.ignoreRecognition)delete this.$MTagSuggestionsController8[t.tagUserID][s];delete t.tagUserID;delete t.tagName;}}};o.prototype.$MTagSuggestionsController4=function(p){'use strict';this.$MTagSuggestionsController15(p);this.$MTagSuggestionsController16(p);};o.prototype.$MTagSuggestionsController16=function(p){'use strict';var q={};p.forEach(function(r){var s=this.$MTagSuggestionsController8[r.id];for(var t in s){var u=s[t].attachmentID;if(!q[u])q[u]=0;q[u]++;}}.bind(this));this.$MTagSuggestionsController2.component.setAttachmentTagCounts(q);};o.prototype.onPhotoUploadSuccess=function(p,q){'use strict';this.$MTagSuggestionsController6.addPhotoIDAndLog(p,q);this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:true});if(!this.$MTagSuggestionsController6.isPolling())this.$MTagSuggestionsController6.start();};o.prototype.$MTagSuggestionsController17=function(p){'use strict';return {name:p.tagName,display:p.tagName,id:p.tagUserID,autoTag:true};};o.prototype.handleFaceboxResponse=function(p){'use strict';p.forEach(function(r){var s=r.fbid,t=r.faceboxes;this.$MTagSuggestionsController2.component.setAttachmentProps(r.attachmentID,{isPollingTagSuggestions:false});t.forEach(function(u){u.photoID=s;u.attachmentID=r.attachmentID;if(!this.$MTagSuggestionsController7[s])this.$MTagSuggestionsController7[s]={};this.$MTagSuggestionsController7[s][u.fbid]=u;if(u.recognitions.length>0){u.ignoreRecognition=false;var v=u.recognitions[0].user.fbid;if(!this.$MTagSuggestionsController8[v])this.$MTagSuggestionsController8[v]={};this.$MTagSuggestionsController8[v][u.fbid]=u;if(!this.$MTagSuggestionsController9[v])this.$MTagSuggestionsController9[v]=0;this.$MTagSuggestionsController9[v]++;if(!this.$MTagSuggestionsController10&&this.$MTagSuggestionsController12){u.tagName=u.recognitions[0].user.name;u.tagUserID=v;var w=this.$MTagSuggestionsController17(u);this.$MTagSuggestionsController3.addAutoToken(w);}}else u.ignoreRecognition=true;}.bind(this));}.bind(this));var q=this.$MTagSuggestionsController3.getEntries();this.$MTagSuggestionsController15(q);this.$MTagSuggestionsController16(q);};o.prototype.removeFaceboxesByPhotoID=function(p){'use strict';if(this.$MTagSuggestionsController6.hasPhotoID(p)){this.$MTagSuggestionsController6.removePhotoID(p);}else if(this.$MTagSuggestionsController7[p]){var q=this.$MTagSuggestionsController7[p];for(var r in q){var s=q[r];if(s.recognitions.length>0)this.$MTagSuggestionsController18(s);}this.$MTagSuggestionsController7[p]=null;}};o.prototype.$MTagSuggestionsController18=function(p){'use strict';var q=p.tagUserID||p.recognitions[0].user.fbid;if(p.recognitions.length>0){this.$MTagSuggestionsController9[q]--;if(this.$MTagSuggestionsController9[q]===0)delete this.$MTagSuggestionsController9[q];}if(this.$MTagSuggestionsController8[q]){delete this.$MTagSuggestionsController8[q][p.fbid];if(Object.keys(this.$MTagSuggestionsController8[q]).length<=0&&!this.$MTagSuggestionsController11[q]&&this.$MTagSuggestionsController12){var r=this.$MTagSuggestionsController17(p);this.$MTagSuggestionsController3.onRemove(r);}else this.$MTagSuggestionsController16(this.$MTagSuggestionsController3.getEntries());}};o.prototype.updateTypeaheadWithFaceboxSuggestions=function(){'use strict';var p=Object.keys(this.$MTagSuggestionsController9);p=p.map(function(s){return +s;});var q=this.$MTagSuggestionsController1.getTokenizer(),r=q.component.props.suggestions.map(function(s){return s.uid;});r.forEach(function(s){if(p.indexOf(s)<0)p.push(s);});q.updateTypeaheadWithSuggestions(p);};o.prototype.$MTagSuggestionsController19=function(){'use strict';var p=this.$MTagSuggestionsController1.getTokenizer();p.component.updateTypeaheadWithSuggestions([]);};o.prototype.generateHiddenInput=function(p){'use strict';var q=[];for(var r in this.$MTagSuggestionsController7)for(var s in this.$MTagSuggestionsController7[r]){var t=this.$MTagSuggestionsController7[r][s];if(t.recognitions.length>0&&t.ignoreRecognition&&t.tagUserID!==t.recognitions[0].user.fbid)q.push(t);}var u=l.create('div',{});l.appendContent(p,u);j.render(i.createElement(k,{tokenCollection:this.$MTagSuggestionsController3.getEntries(),tagSuggestions:this.$MTagSuggestionsController8,failedSuggestions:q}),u);};o.prototype.onPollerTimeout=function(p){'use strict';p.forEach(function(q){this.$MTagSuggestionsController2.component.setAttachmentProps(q,{isPollingTagSuggestions:false});}.bind(this));};o.prototype.addXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];if(q.recognitions.length>0)this.$MTagSuggestionsController18(q);o.addFaceboxData(q,p.tagName,p.tagUserID);if(!this.$MTagSuggestionsController8[q.tagUserID])this.$MTagSuggestionsController8[q.tagUserID]={};this.$MTagSuggestionsController8[q.tagUserID][q.fbid]=q;var r=this.$MTagSuggestionsController17(q);this.$MTagSuggestionsController3.addManualXYTag(r);this.$MTagSuggestionsController5+=1;};o.prototype.deleteXYTag=function(p){'use strict';var q=this.$MTagSuggestionsController7[p.photoID][p.fbid];q.ignoreRecognition=true;delete q.tagUserID;delete q.tagName;this.$MTagSuggestionsController18(p);this.$MTagSuggestionsController5-=1;};o.prototype.getNumXYTags=function(){'use strict';return this.$MTagSuggestionsController5;};o.prototype.getFaceboxesCopyForPhoto=function(p){'use strict';var q={};for(var r in this.$MTagSuggestionsController7[p])q[r]=babelHelpers['extends']({},this.$MTagSuggestionsController7[p][r]);return q;};o.prototype.reset=function(){'use strict';this.$MTagSuggestionsController6.abort();this.$MTagSuggestionsController9={};this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController19();this.$MTagSuggestionsController10=false;this.$MTagSuggestionsController11={};this.$MTagSuggestionsController5=0;};o.addFaceboxData=function(p,q,r){'use strict';p.tagName=q;p.tagUserID=r;p.ignoreRecognition=true;};o.deleteFaceboxData=function(p){'use strict';delete p.tagUserID;delete p.tagName;p.ignoreRecognition=true;};f.exports=o;}),null);
__d('MComposerDialogClearablePreview',['DOM','MSubscriptionsHandlerMixin','mixin','mixInEventEmitter','MComposerDialogClearablePreviewConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('MComposerDialogClearablePreviewConstants').sigils;l=babelHelpers.inherits(o,j(i));m=l&&l.prototype;function o(p,q){'use strict';m.constructor.call(this);this.$MComposerDialogClearablePreview1=q;this.$MComposerDialogClearablePreview2=p;this.addSubscriptions(h.listen(this.$MComposerDialogClearablePreview2,'click',n.CLEAR,this.$MComposerDialogClearablePreview3.bind(this)));}o.prototype.clear=function(){'use strict';this.hide();h.setContent(this.$MComposerDialogClearablePreview1,'');return this;};o.prototype.$MComposerDialogClearablePreview3=function(){'use strict';this.clear();this.emit('clear');return this;};o.prototype.hide=function(){'use strict';h.hide(this.$MComposerDialogClearablePreview2);return this;};o.prototype.setValue=function(p){'use strict';h.setContent(this.$MComposerDialogClearablePreview1,p);this.show();return this;};o.prototype.show=function(){'use strict';h.show(this.$MComposerDialogClearablePreview2);return this;};o.prototype.showIfHasValue=function(){'use strict';return !this.$MComposerDialogClearablePreview1.innerText?this.hide():this.show();};k(o,{clear:true});f.exports=o;}),null);
__d('MComposerOGStrings',['MinutiaeVerbs','OGComposerConstants','fbt'],(function a(b,c,d,e,f,g,h,i,j){var k={getFBTPhrase:function l(m,n,o,p){var q='';switch(m){case h.COMPOSER_FEELS:q=j._("{icon}feeling {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_WATCHES:q=j._("{icon}watching {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_READS:q=j._("{icon}reading {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_LISTENS:q=j._("{icon}listening to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_DRINKS:q=j._("{icon}drinking {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_EATS:q=j._("{icon}eating {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_PLAYS:q=j._("{icon}playing {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_TRAVELS:q=j._("{icon}travelling to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_LOOKS_FOR:q=j._("{icon} looking for {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_SUPPORTS:q=j._("{icon}supporting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_CELEBRATES:q=j._("{icon}celebrating {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_MEETS:q=j._("{icon}meeting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_GETS:q=j._("{icon}getting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_MAKES:q=j._("{icon}making {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_GOES_TO:q=j._("{icon}going to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_THINKS_ABOUT:q=j._("{icon}thinking about {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_REMEMBERS:q=j._("{icon}remembering {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_WRITES_A_NOVEL_ABOUT:q=j._("{icon}writing a novel about {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_SELECTS_VERB:q=j._("{icon}{verb}",[j.param('icon',n),j.param('verb',o)]);break;case h.COMPOSER_OTHER:q=j._("{icon}{object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_VOTES:q=j._("{icon}voting in {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_ATTENDS:q=j._("{icon}attending {object}",[j.param('icon',n),j.param('object',o)]);break;case i.ExercisesTypeID:q=j._("{icon}{object}",[j.param('icon',n),j.param('object',o)]);break;}return q;}};f.exports=k;}),null);
__d('MOpenGraphTagger',['CSS','MLegacyDataStore','DOM','MarauderLogger','MComposerOGStrings','MCompositionShareStore','MRequest','Stratcom','$','cx','eventsMixinDeprecated','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(u){'use strict';this.setRoot(u);this._prompt=j.find(u,'span','og-composer-prompt');this._defaultPrompt=this._prompt.firstChild;this._defaultIconSelector=j.find(u,'div','og-icon-selector');this._iconSelector=this._defaultIconSelector;this._cancelButton=j.find(u,'button','cancel-og-tagger');this._defaultCancelButtonText=this._cancelButton.firstChild;this._isFromActivityLink=false;j.listen(this.getRoot(),'click',null,this._handleClick.bind(this));this._listeners=[o.listen('click','object_result',function(event){event.prevent();var v=event.getNode('object_result'),w=i.get(v);this._objectID=w.id;this._objectStr=w.name;this._icon=w.icon;this._iconSrc=w.icon_src;this._selectedScore=w.score;this._selectedOriginalID=w.original_id;this._clientTime=w.client_time;this._requestID=w.request_id;this._triggersEventTagExpansion=w.triggers_event_tag_expansion;this._addLoggingDataForNodes(v.parentNode.childNodes);this._showAttachment=m.isEmpty()&&w.show_attachment;this._customIconID=w.custom_icon;this._submit();}.bind(this)),o.listen('click','at_result',function(event){event.prevent();this._selectActionType(i.get(event.getNode('at_result')));k.log('og_composer_verb_selected',undefined,{at_id:this._actionType.id,place_id:this._placeID});}.bind(this)),o.listen('click','quicksearch-input',function(event){if(event.getNode('og-object-search')){var v={at_id:this._actionType.id,place_id:this._placeID};k.log('og_composer_object_search_clicked',undefined,v);}}.bind(this)),o.listen('keyup','quicksearch-input',function(event){var v=event.getNode('quicksearch-input');if(v){this._query=v.value;this._keystrokeCount++;if(this._lastNotBackspacedQuery.indexOf(this._query)!==0)this._lastNotBackspacedQuery=this._query;}}.bind(this)),o.listen('composerReset',null,function(event){this._reset();this._placeID=0;}.bind(this))];o.listen('MStructuredComposer:cleanup',null,function(event){for(var v=0;v<this._listeners.length;v++)this._listeners[v].remove();this._listeners=[];}.bind(this));o.listen('MStructuredComposer-opened',null,function(event){this._compositionID=event.getData().session_id;}.bind(this));}t.prototype.getRoot=function(){'use strict';return this.root;};t.prototype.setRoot=function(u){'use strict';this.root=u;};t.prototype.hide=function(){'use strict';j.hide(this.getRoot());this.toggleIncludedPlaceSelector(false);};t.prototype.show=function(){'use strict';j.show(this.getRoot());};t.prototype.updatePrompt=function(u){'use strict';j.setContent(this._prompt,u);};t.prototype.setPlaceID=function(u){'use strict';this._placeID=u;};t.prototype.setSuggestionMechanism=function(u){'use strict';this._suggestionMechanism=u;};t.prototype.toggleIncludedPlaceSelector=function(u){'use strict';var v=j.scry(this.getRoot(),'div','og_included_place');if(v.length){this._isFromActivityLink=u;if(u){j.show(v[0]);}else j.hide(v[0]);}};t.prototype._handleClick=function(event){'use strict';if(event.getNode('cancel-og-tagger'))this.cancel();};t.prototype._reset=function(){'use strict';var u=j.scry(this.getRoot(),'div','og-object-search');if(u.length!==0){j.hide(u[0]);this._showActionTypeSelector();}this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);o.invoke('m:quicksearch:clear');};t.prototype._addLoggingDataForNodes=function(u){'use strict';this._candidateResults=[];this._numResults=u.length;for(var v=0;v<this._numResults;++v){var w=i.get(u[v]);if(this._objectID==w.id)this._selectedPos=v;this._candidateResults[v]=w.id?w.id:0;}};t.prototype._cancelTypeaheadSession=function(){'use strict';if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=false;this._objectID=null;var u=j.scry(this.getRoot(),'div','object_result');this._addLoggingDataForNodes(u);k.log('og_composer_session_abandoned',undefined,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount});};t.prototype.cancel=function(){'use strict';k.log('og_composer_cancel_tagger',undefined,{suggestion_mechanism:this._suggestionMechanism});var u=this._isFromActivityLink;if(this._isFromIconSelector)this.invoke('cancelIconSelection',{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:''});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke('cancel');if(u)this.invoke('cancelFromActivity');};t.prototype.setCancelButtonText=function(u){'use strict';j.setContent(this._cancelButton,u);};t.prototype._showObjectSearch=function(){'use strict';this._hideActionTypeSelector();j.show(j.find(this.getRoot(),'div','og-object-search'));};t.prototype.selectActionTypeImplicitly=function(u){'use strict';var v=j.scry(this.getRoot(),'div','at_result'),w=false;for(var x=0;x<v.length;x++){var y=i.get(v[x]);if(y.id==u){w=true;break;}}if(!w)return false;this._selectActionType(y);return true;};t.prototype.showIconSelector=function(u,v,w,x){'use strict';this.show();this._hideActionTypeSelector();this.updatePrompt(s._("Select an icon"));this._actionTypeId=u;var y='/platform/og/composer/icon_selector/',z=new n(y).setData({actionTypeID:u,objectID:v,objectStr:w,iconID:x});z.listen('postprocess',this._setUpIconSelector.bind(this));z.send();j.replace(this._iconSelector,this._defaultIconSelector);j.show(this._iconSelector);k.log('og_composer_show_icon_selector');};t.prototype._setUpIconSelector=function(){'use strict';this._iconSelector=j.find(this.getRoot(),'div','og-icon-selector');var u=j.scry(this._iconSelector,'a','remove-token');if(u.length!==0)j.listen(u[0],'click',null,this._cancelIconSelection.bind(this));this._iconSearchInput=j.scry(this._iconSelector,'input','icon-search-input')[0];j.listen(this._iconSelector,'click','og-icon-area',this._selectIcon.bind(this));j.listen(this._iconSelector,'click','original-og-icon',function(){return this.cancel();}.bind(this));this._isFromIconSelector=true;};t.prototype._cancelIconSelection=function(){'use strict';this._reset();this.invoke('clear');};t.prototype._selectIcon=function(event){'use strict';var u=event.getNode('og-icon-area'),v=u.lastChild.cloneNode();j.show(v);var w=j.find(this.getRoot(),'i','token-icon');o.addSigil(v,'token-icon');j.replace(w,v);this._icon=v;this._iconSrc=i.get(v).icon_src;this._customIconID=this._icon.getAttribute('data-icon');var x=this._iconSearchInput?this._iconSearchInput.value:'',y=this._actionTypeId;this._reset();this.invoke('iconChanged',{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:y,query:x});};t.prototype._selectActionType=function(u){'use strict';this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery='';this._keystrokeCount=0;this._actionType=u;var v={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};o.invoke('m:quicksearch:actionSelected',null,v);this._showObjectSearch();this.updatePrompt(this._actionType.prompt);};t.prototype._hideActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",true);};t.prototype._showActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",false);};t.prototype._hideIconSelector=function(event){'use strict';this._isFromIconSelector=false;this._actionTypeId=null;j.hide(this._iconSelector);this._showActionTypeSelector();};t.prototype._submit=function(){'use strict';var u={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke('submit',u);delete u.icon;delete u.fbt_phrase;k.log('og_composer_object_selected',undefined,u);};t.prototype._getTagPhrase=function(u,v,w,x){'use strict';return l.getFBTPhrase(u,v,w,x);};t.fromID=function(u){'use strict';var v=p(u),w=i.get(v);if(!w._ogTagger)w._ogTagger=new t(v);return w._ogTagger;};r(t,['submit','cancel','clear','iconChanged','cancelFromActivity','cancelIconSelection']);Object.assign(t.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});f.exports=t;}),null);
__d('MPlacesCurrentLocation',['MPlaces'],(function a(b,c,d,e,f,g,h){var i=function j(k){h.setCurrentJSONLocation(k.location);h.setLocationSearchMode(k.mode);if(k.mode==h.locationSearchModes.MODE_CHECKIN)h.monitorLocation();};g.main=i;}),null);
__d('MPlacesInit',['MPlaces','Stratcom'],(function a(b,c,d,e,f,g,h,i){if(typeof window.usingGears!=='undefined')h.locationOptions.enableHighAccuracy=false;i.listen('click',h.LINK_SIGIL,h.onClick);i.listen('submit',h.FORM_SIGIL,h.onSubmit);}),null);
__d("MQuickSearchLogger",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.$MQuickSearchLogger1=false;this.$MQuickSearchLogger2=false;this.$MQuickSearchLogger3=null;}h.prototype.$MQuickSearchLogger4=function(){"use strict";this.$MQuickSearchLogger1=true;this.$MQuickSearchLogger2=false;this.$MQuickSearchLogger5=Math.random();};h.prototype.$MQuickSearchLogger6=function(){"use strict";this.$MQuickSearchLogger1=false;};h.prototype.logSessionStart=function(i){"use strict";};h.prototype.logResults=function(i,j){"use strict";};h.prototype.logClick=function(i){"use strict";};h.prototype.onSearch=function(i){"use strict";if(!this.$MQuickSearchLogger1){this.$MQuickSearchLogger4();this.logSessionStart(i);}this.$MQuickSearchLogger3=i;};h.prototype.onResults=function(i,j){"use strict";this.logResults(i,j);};h.prototype.onCleanup=function(){"use strict";this.$MQuickSearchLogger6();};h.prototype.onClick=function(i){"use strict";if(!this.$MQuickSearchLogger2){this.logClick(i);this.$MQuickSearchLogger2=true;this.$MQuickSearchLogger6();}};h.prototype.getSID=function(){"use strict";return this.$MQuickSearchLogger5;};h.prototype.getLastRequest=function(){"use strict";return this.$MQuickSearchLogger3;};f.exports=h;}),null);
__d('MQuickSearchLoggerPlaces',['MQuickSearchLogger','MarauderLogger','MLegacyDataStore'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){'use strict';l.constructor.call(this);}m.prototype.logSessionStart=function(n){'use strict';i.log('m_checkin_search_session_start',undefined,{sid:this.getSID()});};m.prototype.logResults=function(n,o){'use strict';i.log('m_checkin_search_results',undefined,{sid:this.getSID(),search_experiment:j.get(o).searchExperiment});};m.prototype.logClick=function(n){'use strict';var o=false,p=-1;if(n){var q=j.get(n.selected_result);if(q!==null)o=q.isEventResult;var r=[];if(n.results!==null&&n.results.children!==null)r=n.results.children;for(var s=0;s<r.length;s++){var t=j.get(r[s]);if(q.id===t.id){p=s;break;}}}var u=-1;if(this.getLastRequest()!==null){var v=this.getLastRequest();if(Object.prototype.hasOwnProperty.call(v,'q')&&Object.prototype.hasOwnProperty.call(v.q,'length'))u=this.getLastRequest().q.length;}i.log('m_checkin_search_click',undefined,{sid:this.getSID(),query_length:u,position:p,is_event:o});};f.exports=m;}),null);
__d('MQuickSearchPlaces',['MPlaces','MQuickSearch','MQuickSearchLoggerPlaces','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m){'use strict';var n,o,p=new j(),q=new i(m,p),r=null,s=q.listen('search',function(x){var y=r||h.getCurrentJSONLocation();if(y==n&&x==o){k.context().prevent();return;}n=h.getCurrentJSONLocation();o=x;var z={json_location:n};z[h.locationSearchModes.SEARCH_MODE]=h.getLocationSearchMode();q.maybeAddQueryParameters(z);k.invoke('m:quicksearch:location:change',null,y);}),t=k.listen('m:quicksearch:places:search-with-location',null,function(x){r=x;q.search();}),u=k.listen('m:quicksearch:places:search',null,function(){q.search();}),v=k.listen('m:quicksearch:places:cancel',null,function(){return q.reset();}),w=k.listen('m:quicksearch:places:click',null,function(event){p.onClick(event.getData());});k.listen('m:page:loading',null,function(){k.removeCurrentListener();s.remove();u.remove();t.remove();v.remove();w.remove();s=u=n=o=q=null;});}f.exports=l;}),null);
__d('MPrivacyComposerMenu',['CSS','MLegacyDataStore','DOM','MComposerLogger','MComposerWaterfallEvent','MModalDialog','MCompositionConfigStore','MCompositionConfigFields','MCompositionPrivacyStore','MCompositionPrivacyFields','MCompositionUserActions','MRequest','MViewport','PrivacyConst','Stratcom','SubscriptionsHandler','URI','$','cx','fbt','idx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){function ca(da,ea,fa,ga){'use strict';this._root=y(da);this._hiddenInput=j.find(this._root,'input');this._selectedOption=j.scry(this._root,'tr','checked')[0];this._stickyURI=ea;this._stickyOption=this._selectedOption;this._enableCustomMenu=ga;this._dontSaveSticky=false;this._customLabel=fa;this._listeners=new w();this._listeners.addSubscriptions(p.addChangeListener(function(){return this._handlePrivacyUpdate();}.bind(this)));this._listeners.addSubscriptions(j.listen(this._root,'click','privacy-option',function(ha){var ia=ha.getNode('privacy-option');if(!this._enableCustomMenu||ia!=this.getCustomOption()){this._selectOption(ia);return;}var ja=v.listen('m:viewport:orientation-change',null,this._addHeightConstraint.bind(this));this._addHeightConstraint();var ka=new x('/privacy/custom/edit'),la=p.get(q.PRIVACY_FBID,null),ma=n.get(o.POST_ID,null);ka.setQueryData({privacyID:la,postID:ma});m.open(ka.toString(),function(na){v.invoke('MPrivacyComposerMenu::custom',null,{visible:false,instance:this,selector:this._root});t.scrollToHeader();ja.remove();this._removeHeightConstraint();if(!na.canceled){var oa=na.payload.value,pa=j.scry(this._root,'tr','privacy-option'),qa=false;for(var ra=0;ra<pa.length;ra++)if(i.get(pa[ra]).value==oa){this._selectOption(pa[ra],true);qa=true;break;}if(!qa){this._updateCustomSelectedOption(na.payload.description,oa);this._selectOption(this.getCustomSelectedOption(),true);}}}.bind(this));v.invoke('MPrivacyComposerMenu::custom',null,{visible:true,instance:this,selector:this._root});}.bind(this)));this._listeners.addSubscriptions(v.listen('MStructuredComposer:reset',null,function(ha){if(this._stickyCustomValue&&this._stickyCustomLabel)this._updateCustomSelectedOption(this._stickyCustomLabel,this._stickyCustomValue);}.bind(this)));this._listeners.addSubscriptions(v.listen('MPrivacyDeferredSelector-loaded',null,function(ha){var ia=ha.getData(),ja=j.find(this._root,'table','privacy-table');if(ja.id==ia.id)this._selectedOption=j.scry(this._root,'tr','checked')[0];this._handlePrivacyUpdate();}.bind(this)));this._listeners.addSubscriptions(v.listen('MPrivacyComposerMenu:updatePrivacy',null,function(ha){var ia=ha.getData();this._selectOption(ia.row,false,ia.log);}.bind(this)));i.set(this._root,{instance:this});}ca.prototype.setShowTagExpansion=function(da){'use strict';h.conditionClass(this._root,"_1oxi",da);h.conditionClass(this._root,"_3kaj",da);};ca.prototype.getIconContent=function(){'use strict';return j.find(this._selectedOption,'i','icon').cloneNode(true);};ca.prototype.getCustomOption=function(){'use strict';return j.find(this._root,'tr','privacy-custom-option');};ca.prototype.getCustomSelectedOption=function(){'use strict';return j.scry(this._root,'tr','privacy-custom-selected-option')[0];};ca.prototype.isCustomSelectedOption=function(){'use strict';return this._selectedOption===this.getCustomSelectedOption();};ca.prototype.getSelectedValue=function(){'use strict';return i.get(this._selectedOption).value;};ca.prototype.getRoot=function(){'use strict';return this._root;};ca.prototype._getCustomLabel=function(){'use strict';var da=this.getCustomSelectedOption();if(!da)return null;var ea=j.scry(da,'span','option-desc')[0];if(ea)return ea.textContent;return null;};ca.prototype._getCustomValue=function(){'use strict';var da=this.getCustomSelectedOption();if(!da)return null;return i.get(da).value;};ca.prototype._selectOption=function(da,ea,fa){'use strict';fa=fa!==undefined?fa:true;var ga=p.get(q.NEVER_SAVE_STICKY,false),ha=i.get(da).value,ia=this._getCustomLabel(),ja=this._getCustomValue(),ka={};ka[q.PRIVACY_FBID]=ha;ka[q.ALREADY_SAVED_STICKY]=ea;ka[q.NEVER_SAVE_STICKY]=ga;ka[q.CLOSE_DIALOG]=true;ka[q.CUSTOM_LABEL]=ia;ka[q.CUSTOM_OPTION]=ja;r.privacyUpdate(ka);if(fa)k.log(l.PRIVACY_ADD,{privacy_setting:ha});};ca.prototype._updateCustomSelectedOption=function(da,ea){'use strict';var fa=j.find(this.getCustomSelectedOption(),'span','option-desc');j.setContent(fa,da);i.set(this.getCustomSelectedOption(),{value:ea});if(ea){j.show(this.getCustomSelectedOption());var ga=j.find(this.getCustomSelectedOption(),'span','plus-label');j.setContent(ga,this._getTagExpansionLabel(ea));}};ca.prototype._getTagExpansionLabel=function(da){'use strict';try{var ea,fa,ga,ha=JSON.parse(da),ia=(((ea=ha)!=null?ea.allow:ea)||[]).indexOf(u.CustomPrivacyTokens.FRIENDS)>=0,ja=((fa=ha)!=null?(ga=fa.settings)!=null?ga.no_tag_expansion:ga:fa)||0;if(ia&&ja===0)return aa._("(+ Friends of Tagged)");return aa._("(+ Tagged)");}catch(ka){}return null;};ca.prototype._addHeightConstraint=function(){'use strict';this._removeHeightConstraint();var da=t.getUseableHeight();this._heightConstraint=t.addHeightConstraint(da);};ca.prototype._removeHeightConstraint=function(){'use strict';if(this._heightConstraint){this._heightConstraint.release();this._heightConstraint=null;}};ca.prototype._handlePrivacyUpdate=function(){'use strict';if(!this._stickyCustomValue&&this.getCustomSelectedOption()){this._stickyCustomValue=this._getCustomValue();this._stickyCustomLabel=this._getCustomLabel();}var da=p.get(q.PRIVACY_FBID,null),ea=p.get(q.ALREADY_SAVED_STICKY,false),fa=p.get(q.NEVER_SAVE_STICKY,false),ga=p.get(q.CLOSE_DIALOG,false),ha=p.get(q.CUSTOM_LABEL),ia=p.get(q.CUSTOM_OPTION);if(ea!==undefined)this._dontSaveSticky=ea;var ja=j.scry(this._root,'tr','privacy-option');if(da===null)da=i.get(this._stickyOption).value;ga=ga||this._hiddenInput.value!=da;var ka=j.scry(document.body,'button','privacy-button')[0];if(da!==null&&ga){var la=null;for(var ma=0;ma<ja.length;ma++)if(i.get(ja[ma]).value==da)la=ja[ma];if(this.getCustomSelectedOption()&&ia!==null&&ha!==null)this._updateCustomSelectedOption(ha,ia);if(!la)la=this.getCustomSelectedOption();if(!la){if(ka)h.conditionShow(ka,false);return;}this._hiddenInput.value=da;if(this._selectedOption)h.conditionClass(this._selectedOption,'checked',false);this._selectedOption=la;h.conditionClass(la,'checked',true);var na=!!j.scry(la,'span','plus-label').length,oa=j.find(this._selectedOption,'i','icon').outerHTML,pa=j.find(la,'span','option-desc');v.invoke('MPrivacyComposerMenu::change',null,{value:this._hiddenInput.value,showPlus:na,iconHTML:oa,optionLabel:pa,instance:this});if(!fa){this._stickyOption=this._selectedOption;this._stickyCustomValue=this._getCustomValue();this._stickyCustomLabel=this._getCustomLabel();if(!this._dontSaveSticky&&this._stickyURI)new s(this._stickyURI).setData({privacyx:this._hiddenInput.value}).send();}}var qa=n.get(o.DISABLE_PRIVACY,false);if(ka&&!qa)h.conditionShow(ka,true);};ca.prototype.disable=function(){'use strict';this._listeners.release();};ca.init=function(da,ea,fa,ga){'use strict';return new ca(da,ea,fa,ga);};ca.getInstance=function(da){'use strict';return i.get(da).instance;};f.exports=ca;}),null);
__d('MPrivacyComposerSelector',['Banzai','CSS','MLegacyDataStore','DOM','HTML','MComposerLogger','MComposerWaterfallEvent','MPrivacyComposerMenu','MRequest','MViewport','Stratcom','Vector','$','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(w,x){'use strict';this._root=t(w);this._button=k.scry(this._root,'button','privacy-button')[0];if(!this._button)this._button=k.find(this._root,'div','privacy-button');this._buttonIcon=k.find(this._root,'div','privacy-button-icon');this._menu=k.find(this._root,'div','privacy-composer-menu');this._config=x;k.listen(this._root,'click','privacy-button',function(event){if(this.isOpen()){this.hideMenu();m.log(n.PRIVACY_CANCEL);}else{this.showMenu();m.log(n.PRIVACY_INTENT);}document.activeElement.blur();}.bind(this));r.listen('MPrivacyComposerMenu::change',null,function(y){var z=y.getData();if(z.instance!=o.getInstance(this._menu))return;if(this._config.updatebuttontext){var aa=k.find(this._button,'span','button-text');k.setContent(aa,z.optionLabel.cloneNode(true));}if(this._config.updatelabel)k.setContent(this._config.updatelabel,z.optionLabel.innerHTML);var ba=k.find(this._button,'span','plus-label');if(z.showPlus){k.show(ba);}else k.hide(ba);k.setContent(this._buttonIcon,new l(z.iconHTML));this.hideMenu();}.bind(this));j.set(this._root,{instance:this});}v.prototype.setShowTagExpansion=function(w){'use strict';i.conditionClass(this._root,"_27-k",w);o.getInstance(this._menu).setShowTagExpansion(w);};v.prototype.getSelectedValue=function(){'use strict';var w=o.getInstance(this._menu);return w&&w.getSelectedValue();};v.prototype.showMenu=function(){'use strict';k.show(this._menu);r.invoke('MPrivacyComposerMenu::show',null,{selector:this._root});this._heightConstraint=q.addMinHeightConstraint(s.getDim(this._menu).y+s.getPos(this._menu).y);h.post('privacy_selector_interaction',{event:'open_selector'});};v.prototype.hideMenu=function(){'use strict';if(this.isOpen()){k.hide(this._menu);r.invoke('MPrivacyComposerMenu::hide',null,{selector:this._root});this._heightConstraint&&this._heightConstraint.release();h.post('privacy_selector_interaction',{event:'close_selector'});}};v.prototype.isOpen=function(){'use strict';return this._menu.style.display!='none';};v.prototype.disableWithSpinner=function(){'use strict';var w=this._config.spinner;k.replace(this._button,w);k.show(w);o.getInstance(this._menu).disable();};v.init=function(w,x){'use strict';return new v(w,x);};v.getInstance=function(w){'use strict';return j.get(w).instance;};f.exports=v;}),null);
__d('areEqual',[],(function a(b,c,d,e,f,g){var h=[],i=[];function j(l,m){var n=h.length?h.pop():[],o=i.length?i.pop():[],p=k(l,m,n,o);n.length=0;o.length=0;h.push(n);i.push(o);return p;}function k(l,m,n,o){if(l===m)return l!==0||1/l==1/m;if(l==null||m==null)return false;if(typeof l!='object'||typeof m!='object')return false;var p=Object.prototype.toString,q=p.call(l);if(q!=p.call(m))return false;switch(q){case '[object String]':return l==String(m);case '[object Number]':return isNaN(l)||isNaN(m)?false:l==Number(m);case '[object Date]':case '[object Boolean]':return +l==+m;case '[object RegExp]':return l.source==m.source&&l.global==m.global&&l.multiline==m.multiline&&l.ignoreCase==m.ignoreCase;}var r=n.length;while(r--)if(n[r]==l)return o[r]==m;n.push(l);o.push(m);var s=0;if(q==='[object Array]'){s=l.length;if(s!==m.length)return false;while(s--)if(!k(l[s],m[s],n,o))return false;}else{if(l.constructor!==m.constructor)return false;if(Object.prototype.hasOwnProperty.call(l,'valueOf')&&Object.prototype.hasOwnProperty.call(m,'valueOf'))return l.valueOf()==m.valueOf();var t=Object.keys(l);if(t.length!=Object.keys(m).length)return false;for(var u=0;u<t.length;u++){if(t[u]==='_owner')continue;if(!Object.prototype.hasOwnProperty.call(m,t[u])||!k(l[t[u]],m[t[u]],n,o))return false;}}n.pop();o.pop();return true;}f.exports=j;}),null);